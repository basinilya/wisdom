==== do not remove first line ================================
Q:
  git push --force origin main
  ! [remote rejected] main -> main (non-fast-forward)

A:
  https://docs.mendix.com/refguide/troubleshoot-repository-size/
  > When prompted, enable force pushing

  https://artifacts.rnd.mendix.com/git-fixer/git-fixer-essentials.zip?_gl=1*11tv19l*_gcl_au*MTIyNjU1NTQwNi4xNzI4NjIzMTMz
    git_fixer_core/main_git_pusher.py
      api_url = config_system.GP__ENABLE_MX_PUSH_API_URL + f"{app_id}/enable-force-push"

  curl -v "https://repository.api.mendix.com/v1/repositories/${appid:?}/enable-force-push" --header "Authorization: MxToken ${MENDIX_TOKEN:?}" --data ''

Q: Unwanted hours added when updating a datetime attribute with JDBC inside Core.dataStorage().executeWithConnection()
A:
    utcCalendar = Calendar.getInstance(TimeZone.getTimeZone("UTC"), Locale.ENGLISH);
    now = new Timestamp(System.currentTimeMillis());
    stmt.setTimestamp(1, now, utcCalendar);

Q:
A:
  .gitattributes (not sure about location)
  *.mpr merge=studiopro
  
  config
  [merge "studiopro"]
  	name = custom merge driver for studio pro files
  	driver = /C/Program Files/Mendix/10.12.3.43016/modeler/mx.exe merge %O %A %B

Q: what's the nulls behavior in List operation (sort) activity in Mendix? 
A:
  9.24.2: always "NULLS LAST", for both ASC and DESC

Q: is committing empty object ok?
A: yes, no error is thrown

Q:
  Get rid of AuditTrail.ReferenceLogLine in mx.data.commit server response.
A:

Q:
  Uncaught (in promise) Error: inconsistent response: committed object is missing from response and cache
A:
  An entity event committed a large number of objects as a side effect and they
  displaced the main committed object from the cache.
  Workaround: call mx.data.subscribe for the main object before the commit and unsubscribe afterwards.

  P.S.
  This error can't be caught because mxui.js 9.24.2 has improper error handling in mx.data.commit():
  This method calls Promise.prototype.then with two parameters: onFulfilled and onRejected.
  onFulfilled validates the object cache and then calls the user success callback asynchronously.
  onRejected is a wrapper for the user error callback.
  However, onFulfilled calls handleUncachedObjects() which may throw an Error and the Promise (as
  expected) does not pass this Error to the error callback, but makes it uncaught.
  A good implementation would append another "then" and move onRejected to it like this:
  then(null, onRejected).

Q: refresh in client
A:
  adds two instructions to XHR result: refresh class and refresh object list
  not necessary when object attributes are alredy displayed on a form
  not necessary when object attributes are used as data source parameters on a form, e.g. for a reference selector
  necessary when the entire object is used as a microflow parameter
  necessary to refresh a grid
 

Q: OQL LEFT OUTER JOIN by entity_path and with extra on clause returns extra results
A:
  SQL generated is:
    left join assiciation_table
    left join entity
  not
    left join assiciation_table join entity

  so assiciation_table is joined successfully and creates the extra results

Q: urlEncode differences between 8.18.7 and 9.24.2
A:
  java 11: URLEncoder.encode("'f_.g!h-i(j)k/l-mmmm n*o~p"): %27f_.g%21h-i%28j%29k%2Fl-mmmm+n*o%7Ep
  8.18.7:         urlEncode('''f_.g!h-i(j)k/l-mmmm n*o~p'): %27f_.g%21h-i%28j%29k%2Fl-mmmm+n*o%7Ep
  9.24.2:         urlEncode('''f_.g!h-i(j)k/l-mmmm n*o~p'): %27f_.g%21h-i%28j%29k%2Fl-mmmm%20n%2Ao~p

  ## 9.0 Betas {#betas}
  * We now encode spaces as `%20` instead of `+` in the `urlEncode()` function.

Q: token auth at teamserver SVN
A:
  use https://svn.home.mendix.com instead of https://teamserver.sprintr.com
  Ex: https://svn.home.mendix.com/11111111-1111-1111-1111-111111111111/trunk
  
  To generate a token visit
    https://user-settings.mendix.com/link/developersettings
    Personal Access Tokens
  
  scope: mx:modelrepository:write
  (the first one, inside "Model Repository")
  
  SVN readonly access is not supported, mx:modelrepository:repo:read only works with Git.
  
  See also https://docs.mendix.com/developerportal/general/team-server/

Q: troubleshoot/log garbage collection on client
A: 
  You can also enable a special setting to see which objects are removed when garbage collections occur.

  dojoConfig = {
    data: {
      "logCleanupStatistics": true
    },
    ...
  }
  
  enable debug logs in browser console.
  
  Example:
    [Client] Garbage collecting 7 of 7
    System.HttpHeader: 6473924464401166, 6473924464401171, 6473924464401170, 6473924464401169, 6473924464401168, 6473924464401167
    System.HttpMessage: 8444249301321588
  
  https://www.mendix.com/blog/the-art-of-state-part-2-garbage-collection/

Q: Value of auto-number attribute 'SomeId' not available
A:
  After a new AutoNumber value was allocated for a new uncommitted object and
  the object was sent to the client the value was lost because the Access Rules
  forbid reading the value.

Q: what if java action throws InterruptedException
A: 
  MicroflowCallBuilder.execute() will throw:
    MendixRuntimeException: java.lang.InterruptedException
  
  If InterruptedException was thrown conventionally, the current thread interrupted state will be false 

  P.S.
  attempts to use ILogNode while thread is interrupted will throw:
    com.mendix.modules.microflowengine.MicroflowException: com.mendix.systemwideinterfaces.MendixRuntimeException: java.lang.RuntimeException: Failed to put log message into the queue
  and will clear the interrupted state

Q: user lacks privilege or object not found: com.mendix.connectionbus.connections.jdbc.implementations.hsqldb.DateTimeLocalizationConverter
A:
        System
            .setProperty(
                HsqlDatabaseProperties.hsqldb_method_class_names,
                "com.mendix.connectionbus.connections.jdbc.implementations.hsqldb.DateTimeLocalizationConverter.convertToLocalDateTime");
        
Q: Disallow concurrent execution
A:
  'Disallow concurrent execution' status on microflows is NOT shared between
  server instances.(!!) So you'd better not rely on using this feature to e.g.
  generate unique id's yourself when allowing more server instances to connect
  to the same backend database.

Q: xasid to cluster node
A:

Q: how originURI works
A: 
  If /xas/ request fails with most errors the framework will call the function showLogin(httpStatus)
  showLogin() will try to find the cookie "originURI".
  If found, the cookie is immediately erased, but its original value is used in
  window.mx.redirect()
  If not found, customLoginFn(httpStatus) is called.
  If customLoginFn() is unconfigured, the default login dialog is shown

  C:\Program Files\Mendix\*\modeler\runtemplates\deployment\dojo-web\index.html
    sets "originURI=/login.html" + ... if not exists
  C:\Program Files\Mendix\*\modeler\runtemplates\deployment\dojo-web\js\login.js
    sets "originURI=" + location.pathname, usually it's also "/login.html".
  SAML20 sets "originURI=SSO/login", but with Path=/SSO and it's ineffective

  Without originURI=/login.html the login page will never be shown and the login
  dialog will be shown instead.

Q: test SSO locally for the web site https://acme-test.acme.com
A:
* You need a key/certificate pair for the desired web site. The key file is
  mandatory.
* Issue a certificate for "*.acme.com". It should be issued by a custom CA
  (preferred) or be a self-signed certificate, see ../openssl/openssl-faq.txt
* Make it trusted in the browser or OS, e.g. in "certmgr.msc" 
* Install Stunnel: https://www.stunnel.org/downloads.html
* Copy the site key/certificate PEM bundle "acme.com-bundle.pem" into
  C:\Program Files (x86)\stunnel\config\
* Edit C:\Program Files (x86)\stunnel\config\stunnel.conf

    ; config section for https://acme-test.acme.com
    [acme-test]
    ; Use 127.* values other than 127.0.0.1 as the port 443 is busy
    accept = 127.0.0.2:443
    ; The address of the local web app
    connect = 127.0.0.1:8080
    ; file name relative to the config dir
    cert = acme.com-bundle.pem

* restart the Stunnel windows service
* Launch from command line:

    chrome.exe --host-resolver-rules="MAP acme-test.acme.com 127.0.0.2"

* Duplicate an existing Mendix app configuration and change
  "Application root URL" to "https://acme-test.acme.com" (no port)

* Start the app and open the web page https://acme-test.acme.com/login.html
* Configure/Refresh SP Metadata
* Setup and activate an IdP Configuration
* Logout and open https://acme-test.acme.com/SSO/

Q: date picker for Localize=N attribute and having letter Z in custom format still shows client timezone 
A: 
  Я думал, что Localize влияет на то, как виджеты форматируют и парсят дату. Я думал, что если Localize=Yes, то виджеты будут форматировать и парсить, используя таймзону браузера, а если Localize=No, то используя UTC.
  
  Но всё не так! Localize влияет только на преобразование даты при передаче между сервером и клиентом!
  Если Localize=Yes, то преобразования НЕ ПРОИСХОДИТ. JS Date будет содержать то же значение, что java.util.Date. Именно поэтому для таких атрибутов виджеты отображают корректное время в таймзоне браузера, а другую таймзону они использовать не умеют.
  
  Если Localize=No то при передаче дата преобразуется так, что условно результат formatDateTimeUTC на сервере равен результату formatDateTime на клиенте. Если на сервере java.util.Date содержит полночь UTC, то на клиенте JS Date содержит полночь по браузеру. Это преобразование прозрачно до тех пор, пока вы не пытаетесь использовать значение атрибута в клиентстких выражениях или в Nanoflow. Тогда могут быть неожиданные результаты.

Q: custom date format in nanoflows
A: some letters are unsupported. From mxui.js:

            function i(e) {
                return o(e, [{
                    existing: "GGGG",
                    replacement: "GGG"
                }, {
                    existing: "GGGGG",
                    replacement: "GGG"
                }, {
                    existing: "GGGGGG",
                    replacement: "GGG"
                }, {
                    existing: "MMMMM",
                    replacement: "MMMM"
                }, {
                    existing: "E",
                    replacement: "EEE"
                }, {
                    existing: "EE",
                    replacement: "EEE"
                }, {
                    existing: "EEEEE",
                    replacement: "EEEE"
                }, {
                    existing: "EEEEEE",
                    replacement: "EEEE"
                }, {
                    existing: "S",
                    replacement: "SSS"
                }, {
                    existing: "SS",
                    replacement: "SSS"
                }, {
                    existing: "SSSS",
                    replacement: "'0'SSS"
                }, {
                    existing: "SSSSS",
                    replacement: "'00'SSS"
                }, {
                    existing: "SSSSSS",
                    replacement: "'000'SSS"
                }, {
                    existing: "W",
                    replacement: "'W'"
                }, {
                    existing: "WW",
                    replacement: "'WW'"
                }, {
                    existing: "WWW",
                    replacement: "'WWW'"
                }, {
                    existing: "WWWW",
                    replacement: "'WWWW'"
                }, {
                    existing: "WWWWW",
                    replacement: "'WWWWW'"
                }, {
                    existing: "WWWWWW",
                    replacement: "'WWWWWW'"
                }, {
                    existing: "F",
                    replacement: "'F'"
                }, {
                    existing: "FF",
                    replacement: "'FF'"
                }, {
                    existing: "FFF",
                    replacement: "'FFF'"
                }, {
                    existing: "FFFF",
                    replacement: "'FFFF'"
                }, {
                    existing: "FFFFF",
                    replacement: "'FFFFF'"
                }, {
                    existing: "FFFFFF",
                    replacement: "'FFFFFF'"
                }, {
                    existing: "Z",
                    replacement: "'Z'"
                }, {
                    existing: "ZZ",
                    replacement: "'ZZ'"
                }, {
                    existing: "ZZZ",
                    replacement: "'ZZZ'"
                }, {
                    existing: "ZZZZ",
                    replacement: "'ZZZZ'"
                }, {
                    existing: "ZZZZZ",
                    replacement: "'ZZZZZ'"
                }, {
                    existing: "ZZZZZZ",
                    replacement: "'ZZZZZZ'"
                }, {
                    existing: "z",
                    replacement: "'z'"
                }, {
                    existing: "zz",
                    replacement: "'zz'"
                }, {
                    existing: "zzz",
                    replacement: "'zzz'"
                }, {
                    existing: "zzzz",
                    replacement: "'zzzz'"
                }, {
                    existing: "zzzzz",
                    replacement: "'zzzzz'"
                }, {
                    existing: "zzzzzz",
                    replacement: "'zzzzzz'"
                }, {
                    existing: "X",
                    replacement: "'X'"
                }, {
                    existing: "XX",
                    replacement: "'XX'"
                }, {
                    existing: "XXX",
                    replacement: "'XXX'"
                }, {
                    existing: "XXXX",
                    replacement: "'XXXX'"
                }, {
                    existing: "XXXXX",
                    replacement: "'XXXXX'"
                }, {
                    existing: "XXXXXX",
                    replacement: "'XXXXXX'"
                }])
            }



Q: date literals in client XPath
A:
  send as epoch millis.
  '2024-04-15 13:37:59.000+03:00'
  ->
  //MyFirstModule.Entity[(changedDate>=1713177479000 and changedDate<1713263879000)]
  or in ISO format (time part is optional)
  [changedDate > '2024-09-30T13:45:00.000-0100']

Q: App is in maintenance mode. To turn off unset DEBUG_CONTAINER variable
A: The python server is serving this page if the container was started with debug enabled. You can't stop it without stopping the container. Forward another port to connect to NGinx on port 1234

Q: Will this fail? :
    '' + (if true then empty else 'dummy')
A: no, concatenating null results in concatinating the word 'null'
  confirmed in 9.24.2

Q: Will this fail? :
    isMatch('some', if true then empty else 'dummy')
    contains('some', if true then empty else 'dummy')
A: yes, isMatch(..., empty) fails with: Incorrect arguments for function isMatch: 'some', null
  confirmed in 9.24.2

Q: Will this fail? :
    isMatch(if true then empty else 'dummy', 'some')
    contains(if true then empty else 'dummy', 'some')
A: no, but the second parameter must not be null. isMatch(empty, ...) just returns false 
  confirmed in 9.24.2

Q: Will this fail? :
    replaceAll('some', if true then empty else 'dummy', 'some')
A: yes, replaceAll(..., empty) fails with: Incorrect arguments for function replaceAll: 'some', null, 'some'
  confirmed in 9.24.2

Q: Will this fail? :
    replaceAll(if true then empty else 'dummy', 'some','some')
A: no, but the other parameters must not be null. replaceAll(empty, ...) just returns a zero-length string: ''
  confirmed in 9.24.2

Q: Will this fail? :
    toLowerCase(if true then empty else 'dummy')
    toUpperCase(if true then empty else 'dummy')
    trim(if true then empty else 'dummy')
    urlEncode(if true then empty else 'dummy')
    urlDecode(if true then empty else 'dummy')
A: no, these functions just return a zero-length string: ''
  confirmed in 9.24.2

Q: Will this fail? :
    find(if true then empty else 'dummy','non-null')
A: no, but the second parameter must not be null. find(empty, 'non-null') just returns -1
  confirmed in 9.24.2

Q: Will this fail? :
    find('some',if true then empty else 'dummy')
A: yes, find(..., empty) fails with: Incorrect arguments for function find: 'some', null
  confirmed in 9.24.2

Q: Will this fail? :
    substring(if true then empty else 'dummy',0,0)
A: no, null is treated here as a zero-length string. Non-zero start or length will cause StringIndexOutOfBoundsException
  confirmed in 9.24.2

Q: display List View in two columns
A: lv-col-xs-6

Q: slow query warning
A: ConnectionBus_Queries: Query executed in

Q: Scheduled Events on Premises
A: 
  ScheduledEventExecution and MyScheduledEvents together.
  https://forum.mendix.com/link/space/app-development/questions/1194
  https://docs.mendix.com/refguide/custom-settings/

  ScheduledEventExecution: Choices are ALL, NONE, or SPECIFIED. In the case of SPECIFIED, enumerate the scheduled events using the MyScheduledEvents configuration option described below. 
  MyScheduledEvents: A comma-separated string with the names of the events. Please don’t forget the name of the module (a name can be, for example, CRM.UpdateCustomerStatistics).

Q: retrieve XPath from dev tools
A: 

mx.data.get({
    xpath: "//System.User[true()]",
    filter: {
        sort: [["Name", "asc"]],
        offset: 0,
        amount: 10
    },
    error: function(e) {
        console.error(e);
    },
    callback: function(objs) {
        console.info("Received " + objs.length + " MxObjects");
    }
});


Q:
  java.lang.NullPointerException: null
  	at com.mendix.modules.microflowengine.actions.list.ListOperationAction.$anonfun$execute$5(ListOperationAction.scala:50)
A:
  a list for List Operation contains null element
  In 9.24.2 it's possible to add null elements to list if "add" expression is a reference and the reference itself is not empty, but the referenced object does not exist.
  The referenced object could be missing if it's a deleted remote object or an object deleted with SQL without deleting the reference.

  The issue can be reproduced by deleting an object row with SQL.
  A broken list can also be created with java

Q: IContext.getContextObjects() is empty
A:
  https://community.mendix.com/link/space/app-development/questions/7036
  Alexander Willemsen
  I think (not sure) that the IContext.getCurrentIdentifier() method is now just legacy. Bit of history:
  
  Before Mendix had microflows, every action had to be a Java action. But because there were no microflows, there also wasn't a "call Java action" activity where you could pass parameters to the action. This meant that Java actions did no have any parameters, but had to "find" this information in the context.
  
  I think there were 4 ways to call a Java action:
  
      From an event handler on the entity (e.g. before commit), in which case the current object would be the object on which the event triggered.
      From a button on a data grid, in which case the current object would be the selected object.
      From a button/event on a data view, in which case the current object would be the same as "[%CurrentObject%]".
      From a scheduled event, in which case there wouldn't be a current object.
  
  Then there was also the IContext.getContextObjects() method, which would return all objects in the context (including the current object). In those older Mendix versions the context mechanism was basically always enabled with no way to turn it off (now it's the apply context setting on forms which is off by default). The contents of this context (which could contain anything, depending on the way the user navigated the application up until that point) was returned by this method, which you then had search for yourself (usually you'd search for a certain object type).
  
  As Michel mentioned and the Mendix documentation recommends, there are now far better ways to achieve this (like parametrised microflow calls, including the options to pass any object), so I wouldn't use these old methods.

Q: get the most recent System.QueuedTask
A:
  As with any other entity, the committed object IDs are stored in the current Savepoint object and can be obtained by calling: Seq<Long> committedIds()
  JavaConverters.asJava(JavaConverters.asJava(ContextImpl.requestScope().savepointQueue()).iterator().next().committedIds())
  See GetLastQueuedTask.java

Q: get last java.lang.Throwable in a microflow
A:
  MicroflowImpl.scope().getLatestError().get()
  see RethrowWithCause.java

Q: .scss files not compiled in Mendix 8x
A:
  Requires additional tool: Calypso or Gulp  
  https://docs.mendix.com/howto8/front-end/calypso/


Q: get savepoints information
A:
  JavaConverters.asJava(ContextImpl.requestScope().savepointQueue()).iterator().next().id()
  see LogTransactionId.java

Q: do something right after DB transaction ends
A:
  call 
  public void com.mendix.basis.action.ContextImpl.registerTransactionListener(final com.mendix.basis.action.TransactionListener listener)
      this.requestScope().registerTransactionListener(listener);
  }  

Q: do something right before DB transaction ends
A:
  TransactionListener does not have "before" methods!

  With ByteBuddy instrument:
  a)
  com.mendix.connectionbus.connections.jdbc.TransactionConnectionManager.commitTransaction(UUID)
  caveat: at this point there's no IContext or RequestScope, you can't use
  public API and you don't have access to committed IDs.

  b)
	com.mendix.basis.action.ContextImpl.endTransaction()
  caveat: you will have to check if it's a top-level transaction

Q: ?
A:
  for empty enum getKey(empty) and getCaption(empty) return zero-length string '', not empty

Q: 
  3m, 6m, 12m, 24m, 48m, 1h36m, 3h12m, 6h24m, 12h48m, 1d.
A:
  Exponential delay,
  Retries: 10
  Initial interval: 180
  Maximum interval: 86400

Q:
  Data Grid editable Date column 
  Value '11-Jan-2024' is not valid for field SnSaml.AdUser/MissingInAdSince.
A:
  Mendix 9.24.2 bug:
  if current locale specifies month name in date format, e.g. MMM
  then a valid date string will never match the regexp expecting numeric month in early validation:

                switch (t.getAttributeType(n)) {
                ...
                  case 'Date':
                  case 'DateTime':
                    return null != r.match(/^\d+([\/\-.])\d+\1\d+$/) &&
                    void 0 !== m(r, {
                      type: 'date'
                    });

Q: Extract single parameter from URL query string
A:
  This deletes every character
    .
  not preceded by the desired Key=
    (?<!(?:&|^[?]?)'+$Key+'=)
  then deletes '&' and the characters after it.
  Groups are non-capturing
    (?:
  DOTALL is enabled
    (?s)
  Finally, urlDecode

  Full expression:

    if $QueryString != empty and $Key != empty
    then
    urlDecode(
    replaceFirst(
    replaceFirst($QueryString,'(?s)(?:(?<!(?:&|^[?]?)'+$Key+'=).)*','')
    ,'(?s)&.*',''
    )
    )
    else empty

Q: ?
  I need to truncate a string value in Mendix, like left($Object/Attribute, 1000), but there's no function "left".
  And substring() throws if the input string is shorter. One ugly workaround with regex: replaceFirst($Object/Attribute, '(?s)(?<=(?:.{1000})).*', '')
A:
  In that case, I would use substring($Object/Attribute, 0, min(1000, length($Object/Attribute))). I think that's easier to understand than the regex.

Q: XPath join by multiple attributes
A: not supported

Q: java.lang.NoSuchMethodError: 'com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap$Builder.buildOrThrow()'
A: 
  eviction does not work when version has suffix like in guava-30.1.1-jre.jar
  Workaround:
  create a jar with two version suffixes, e.g:
  guava-30.1.1-jre-9999.9.9.jar
  
  real world affected libraries:
    guava-30.1.1-jre.jar
    slf4j-simple-2.0.0-alpha1.jar
    listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar

Q: stdout when launch in Studio
A: deployment\log\m2ee_log.txt

Q: resources aren't copied from javasource/ into deployment/run/bin/
A: https://forum.mendix.com/link/space/app-development/questions/2656

  Put the resources in userlib/
  The userlib/ folder structure is copied into deployment/model/lib/userlib/ by
  Studio during packaging or local deployment. That folder is in classpath.
  Unlike Eclipse, Studio does not copy non-java files from javasource/.

Q: transactions and savepoints
A: 
  The rule of thumb:
  When calling a microflow, you probably want "Custom with rollback": no new tx/savepoint, changes before the call are rolled back, and a new tx/savepoint is created on error
  When calling any other action you probably want "Custom without rollback": no new tx/savepoint (because not microflow), no changes are rolled back, and no new tx/savepoint on error

  With microflows only use "Custom without rollback" if you know what you're doing

  Transactions are not implicit. Normally Mendix starts a transaction before calling your microflow,
  but if you end it, a new transaction won't start automatically even if you save objects to DB.
  If you eneded a transaction you probably want to start another one with Context.startTransaction()
  
  HSQLDB and PostgreSQL both support Savepoints. If a transaction is active calling
  Context.startTransaction() again will create a savepoint. Calling Context.rollbackTransaction()
  will rollback to the beginning of the savepoint, regardless of what Javadoc says.

  Not calling MicroflowCallBuilder.inTransaction(false) will create a transaction or if a
  transaction is already active then a savepoint. inTransaction is true by default.
  There's no active transaction when you construct a new system
  context or construct a context from ISession.

  Calling a SUB-microflow with error handling "Custom without Rollback" also creates a savepoint.
  All other error handling modes don't create it.  

Q: passing "empty" to a List parameter of a microflow
A: There's no error, but attempt to add to this list will silently fail, at least in 9.18 

Q: Deleting ... object failed for security reasons
A: Check access rules of Cascade Deleted Objects

Q:
  com.mendix.webui.WebUIException: Exception while executing runtime operation
  	at com.mendix.webui.actions.client.RuntimeOperationAction.$anonfun$apply$1(RuntimeOperationAction.scala:60)
  
  Caused by: com.mendix.webui.WebUIException: Applying change for 'Attribute' of object with id '14636698789069566' (BookPlanningMain.ManuscriptSubmission) failed for security reasons. No change hash found for read only member.
  	at com.mendix.webui.requesthandling.HashUtilImpl$.verifyHash(HashUtilImpl.scala:50)
A:
  For changes to members not writable by current user the server expects a so called "change hash" which it previously sent.
  The reason why the change was not sent may be a buggy customization or a bug in Mendix itself.
  Change hash is sent unless Mendix thinks that the user has Unconditional Write Access to the member, i.e. access not constrained by XPath.
  So Mendix does not bother checking the current object for write access to a certain member if it's marked writable in the global Meta Model of a type.
  It works because normally write is not denied for members that have Unconditional Write Access.
  If there's a customization that denies this access it may lead to the error above.
  One workround is to constrain all access rules with this no-op XPath: [true()]
  The other workaround is to instrument hasUnconditionalWriteAccess$1() with an extra check of the current writability of the member.

    Responses:
    good:
                "changes" : {
                  "14636698789069566" : {
                    "Attribute" : {
                      "hash" : "g1r5nnqPt9rG/MdQf2A6R01yIYQwf003oERY00mMClc=",
                      "value" : "nullx"
                    }
                  }
                },
    
    bad:
                "changes" : {
                  "14636698789069566" : {
                    "Attribute" : {
                      "value" : "nullx"
                    }
                  }
                },

    see com.mendix.webui.requesthandling.helpers.StateHandling

Q: NULL Boolean
A: Boolean can't be NULL, when a new DB column is added, Mendix does extra UPDATE SET true or false 

Q: XPath constraint [Attribute = empty] or [Attribute = $Nullable]
A: safe, the resulting SQL will have either "is NULL" or "= ?" depending on actual parameter value

Q: troubleshoot unique validation
A:
  the cause is not logged. You can place a java breakpoint in the constructors of UniqueConstraintViolationException

  Failure(com.mendix.datastorage.exception.UniqueConstraintViolationException: Duplicate column value violates its unique constraint: ERROR: duplicate key value violates unique constraint "uniq_snsaml$aduser_samaccountname"
    Detail: Key (samaccountname)=(Nugent) already exists. (SQL State: 23505, Error Code: 0) Detail Message: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "uniq_snsaml$aduser_samaccountname"
    Detail: Key (samaccountname)=(Nugent) already exists., org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "uniq_snsaml$aduser_samaccountname"
    Detail: Key (samaccountname)=(Nugent) already exists.)


Q: add a before commit event handler in runtime

A:
  When you commit from a microflow or from java
  a list to commit may contain objects of different types. For such list the objects are
  grouped by type and a separate com.mendix.basis.action.user.CommitAction is created for
  each type and the group is assigned to the action's EventObjects list.
  CommitAction never has an empty EventObjects list.
  Custom ActionListener can be registered for CommitAction.class. This class instance is
  needed for registration and can be obtained from
  Core.getConfiguration().getClass().getClassLoader()
  A listener has configurable lists of EventActionInfo for "before" and "after" events.
  A listener also has a "replace" property, but for CommitAction a replacement java action
  requires a constructor accepting Scala immutable list which is inaccessible.
  For each object in EventObjects a certain UserAction subclass is instantiated depending
  on the values in EventActionInfo. If it has a Consumer, then an anonymous UserAction is
  instantiated that calls the Consumer and returns true unconditionally. Otherwise it
  treats the action name as the Microflow or a Custom Java Action name prefixed with the
  module name. The method addBeforeEvent(String,boolean) will convert the class name to the
  action name. The action must have a constructor accepting context and a single mendix
  object.
  EventActionInfo has a flag to treat negative action result as an error or a
  cancellation.
  Returning false from the "before" event cancels the entire commit action including the    
  objects from other groups. However, the previous object groups in a big list stay
  committed. Just like when returning false from a BCO_ microflow.
  The action's EventObjects property is writable, but CommitAction already has one default
  listener with a "before" action:
    com.mendix.basis.action.user.DataValidationAction
  and if you assign an empty list then DataValidationAction will fail with
  ArrayIndexOutOfBoundsException. So to cancel commit of just the current group you can
  assign an empty string to the private field CommitAction.entityName.
  listener's check() method is called twice. First on a listener instance in the registry
  second after the listener is cloned and the events are about to trigger.


Q: default index.html location
A: C:\Program Files\Mendix\*\modeler\runtemplates\deployment\dojo-web\index.html

Q: JSON structure Date Time detection pattern
A:

Q:  A REST service operation with a body parameter needs an import mapping (unless it's a file document)	Rest operation parameter 'screeningResult'	Published REST service 'CallbackService'	PlagiarismCheck
A:  remove this parameter and create an HTTPRequest paramater and use its attribute "Content"

Q: guess microflow parameter names in java
A:
    static Map<IDataType, String> mapMicroflowParameters(
            String microflowName,
            Collection<IDataType> paramTypes) {

        Map<IDataType, String> result = new HashMap<>();

        final Map<String, IDataType> inputParameters = Core.getInputParameters(microflowName);
        Map<?, ?> actualParamsForMsg = inputParameters;
        Collection<?> expectedParamsForMsg = paramTypes;
        try {
            // Throws IllegalStateException when not unique
            Map<IDataType, IDataType> expectedTypes =
                paramTypes
                    .stream()
                    .collect(Collectors.toMap(Function.identity(), Function.identity()));
            expectedParamsForMsg = expectedTypes.keySet();

            // Throws IllegalStateException when not unique
            Map<IDataType, String> actualParams =
                inputParameters
                    .entrySet()
                    .stream()
                    .collect(Collectors.toMap(Entry::getValue, Entry::getKey));
            actualParamsForMsg = actualParams;

            for (;;) {
                boolean needRetry = false;
                for (var it = expectedTypes.entrySet().iterator(); it.hasNext();) {
                    var entry = it.next();
                    final IDataType exp = entry.getValue();
                    if (exp != null) {
                        String foundName = actualParams.remove(exp);
                        if (foundName != null) {
                            it.remove();
                            result.put(entry.getKey(), foundName);
                        } else if (exp.isMendixObject() || exp.isList()) {
                            // try nearest super for all
                            needRetry = replaceWithSuper(entry);
                        } else {
                            entry.setValue(null);
                        }
                    }
                }
                if (!needRetry) {
                    break;
                }
                // check unique supertypes
                expectedTypes
                    .values()
                    .stream()
                    .filter(Objects::nonNull)
                    .collect(Collectors.toMap(Function.identity(), Function.identity()));
            }
        } catch (IllegalStateException /* NOSONAR */ e) {
            // some types not unique
        }
        if (!expectedParamsForMsg.isEmpty() || !actualParamsForMsg.isEmpty()) {
            throw new IllegalArgumentException(
                "Unable to map these types: " + expectedParamsForMsg + " to the remaining "
                    + microflowName + " parameters: " + actualParamsForMsg);
        }
        return result;
    }

    private static boolean replaceWithSuper(Entry<IDataType, IDataType> entry) {
        final IDataType expectedTypeOrItsSuper = entry.getValue();
        boolean isList = expectedTypeOrItsSuper.isList();
        String superName =
            Core.getMetaObject(expectedTypeOrItsSuper.getObjectType()).getSuperName();
        if (superName != null) {
            String type = isList ? superName : ("[" + superName + "]");
            IDataType superType = Core.createDataType(type);
            entry.setValue(superType);
            return true;
        }
        entry.setValue(null);
        return false;
    }

Q: fetch only some attributes with XPath in java
A: 
    IRetrievalSchema.addAllMetaPrimitiveNames() was removed from public API in Mendix 7.
    The internal implementation class in Mendix 9x still has this method and the client method mx.data.get with parameter filter.attributes uses it.
    
    https://apidocs.rnd.mendix.com/6/runtime/com/mendix/systemwideinterfaces/connectionbus/requests/IRetrievalSchema.html#addAllMetaPrimitiveNames-java.util.List-
    https://apidocs.rnd.mendix.com/10/client-react/mx.data.html#.get

Q: No connecting flow found
A: Decision activity expression returned: empty

Q: Unique Nulls
A: At least in Postgres and H2 the unique constraint created by Mendix allows duplicate NULLs 

Q: replace an attribute with a new one in the domain model
A: 
  If it's a marketplace module, it's more complicated
  If it's an app, it's easier:
  You rename an existing attribute to "AttributeOld" and create a new attribute "Attribute"
  The old db column is actually renamed and a new column is created
  
  If it's a marketplace module, when you import a module
  with a renamed attribute the existing db column is
  dropped and the data is lost.

Q: mx.data.action onValidation is not called
A: onValidation is only called in case of exception

Q: Existing Administration.Account cannot be found on the Account Overview page
A: bug. between 9.3 and 9.18.2 despite opted to manage
  all roles the Administrator cannot read users with all
  roles revoked

Q: secondsBetween
A: 
  returns abs(Date1 - Date2)
  passing empty will cause error

Q: compare empty dates
  error .IllegalArgumentException: Left and right hand side of binary expression should not be empty
A:
  (a != empty and b != empty and a < b)

Q: Cannot find association 'BookProposal.BookProposal_va_source' on MetaObject '[MetaObject: name=BookPlanningMain.Edition entityId=112]'.
A: A one-to-one association is used in an deep expression in a microflow

Q:
  In a java action I wrap org.xml.sax.SAXParseException with com.mendix.systemwideinterfaces.core.UserException
  but $latestError/ErrorType is still org.xml.sax.SAXParseException
A:
  $latestError/ErrorType is the class name of the last Throwable cause in the chain.

Q: downgrade project or module
A:
  open .mpr file with C:\Program Files\Mendix\*\modeler\MprTool.exe, 
  click Tools > Edit Metadata and set the earlier version

Q: advanced downgrade
A:
mkdir -p deployment/dump

cat <<'EOF' | sqlite3 *.mpr
.output deployment/dump/dump.sql
.dump
.output

--update _MetaData  set  _ProductVersion = '9.5.4.47318', _BuildVersion = '9.5.4.47318';

SELECT writefile('deployment/dump/' || ContainmentName || '-' || hex(UnitID) || '.bson', Contents)  from Unit;
.exit
EOF


for x in deployment/dump/*.bson; do
  bsondump --type=json "$x" >"$x.json"
done

java RemoveJarDeploymentSettings

sqlite3 project.mpr
update Unit set Contents = readfile('dump/' || ContainmentName || '-' || hex(UnitID) || '.bson.1.bson') where hex(UnitID) = 'BA2320E029FEC248BA8B016E8302221D';
vacuum;
.exit

Q: what makes a module appear under marketplace modules?
A:
  compare dumps of module unit BSONs: 
  
  {
  	"$ID": {
  		"$binary": {
  			"base64": "1a8tRzhgA0+TOhqSH0tqSA==",
  			"subType": "00"
  		}
  	},
  	"$Type": "Projects$ModuleImpl",
  	"AppStoreGuid": "1d7b7a3f-84e6-4fc1-baf0-afbd0ee23b13",
  	"AppStorePackageId": {
  		"$numberLong": "23513"
  	},
  	"AppStoreVersion": "2.0.1",
  	"AppStoreVersionGuid": "1d7b7a3f-84e6-4fc1-baf0-afbd0ee23b13",
  	"FromAppStore": true,
  	"IsThemeModule": false,
  	"Name": "Administration",
  	"NewSortIndex": {
  		"$numberDouble": "-0.5"
  	}
  }
  
  {
  	"$ID": {
  		"$binary": {
  			"base64": "1a8tRzhgA0+TOhqSH0tqSA==",
  			"subType": "00"
  		}
  	},
  	"$Type": "Projects$ModuleImpl",
  	"AppStoreGuid": "",
  	"AppStorePackageId": {
  		"$numberInt": "0"
  	},
  	"AppStoreVersion": "",
  	"AppStoreVersionGuid": "",
  	"FromAppStore": false,
  	"IsThemeModule": false,
  	"Name": "Administration",
  	"NewSortIndex": {
  		"$numberDouble": "-0.5"
  	}
  }


Q: remember dev portal credentials
A: studiopro.exe --external-browser-signin

Q: Why are one-to-one associations evil?
A:
  Updating one-to-one associations only from one side and then trying to save both previously retrieved objects lead to unexpected state of DB
  This mistake is common in user Microflows and in addon widgets too.

Q: Auto-fill and Auto-fit content not available in Layout Grid design properties. Only numeric widths available
A: Erase the "theme" folder (most probably coming from Atlas 2) and copy this folder from a working Atlas 3 app

Q: In a tall pop-up have to scroll down to see the Data View footer
A: Move the data view outside of the enclosing layout grid

Q: All microflow requests fail with 403 after successful login, causing page refresh loop
A:
  The outdated .layout.xml containing obsolete "queryId" values was cached by the load balancer.
  It can happen if a newer Cache Burst value was used to retrieve .layout.xml from the old deployment.
  If the two instances run in parallel, then index.html can be requested by the load balancer from the
  new deployment and then .layout.xml is requested from the old deployment and then is cached.
  Solution: rebuild the app so the Cache Burst is updated again and deploy it.

  Some load balancers allow manual invalidate cache
  $ curl 'https://your.app/pages/en_US/SysUtils/Some.layout.xml?637945052630427850' -X PURGE
  { "code":"200", "message":"Purged" }


Q: Action activity that has a side effect on the client is not recommended here because the microflow is used as a data source for data view 'dataView1'.
A: disable "Refresh in client" for the returned object

Q: Pop-up menu placed in a layout is not visible
A: 
  _custom.scss :
  .flexcontainer.header--top {
      overflow: visible;
  }

Q: module roles in complex expression for widget visibility 
A:

Q: get module roles in java
A: 

Q: refresh on client from java code
A: 
  !!! always call both addRefreshClass and addRefreshObjectFeedback
  !!! addRefreshObjectFeedback alone works only for data view but not for grids

    FeedbackHelper.addRefreshClass
    FeedbackHelper.addRefreshObjectFeedback

Q: Call a nanoflow in a javascript action
A:
  The easiest is to create a parameter of the type 'Nanoflow' in the javascript action.
  The passed parameter will be of the type 'function' returning a Promise and
  accepting a single parameter of the type 'JS object' whose properties are the
  nanoflow's named parameters.

Q: replicate SAML SP certificate to another Environment
A: 
  - On the source app go to SP Metadata and download the JKS
  - On the target app go to SP Metadata and upload the JKS, then click
    "Download SP Metadata" one time. This will extract the certificate
    from the JKS and save it in SPMetadata object

Q: entity ID type ID, sequences etc.
A: 
  The real sequence objects are only used for autonumber attributes.

  See com.mendix.connectionbus.IdentifierPoolImpl.IdentifierData.newObjectId(int)
  
  CREATE MEMORY TABLE PUBLIC."mendixsystem$entityidentifier"(
  "id" VARCHAR(36) COLLATE INFORMATION_SCHEMA.SQL_TEXT_UCC NOT NULL PRIMARY KEY,
  "short_id" SMALLINT,
  "object_sequence" BIGINT
  )
  INSERT INTO "mendixsystem$entityidentifier" VALUES('b1103c3a-5b42-4b6a-9458-653525793e0d',141,12901)
  8d
  3265

  INSERT INTO "avatarmain$vaitem" VALUES(39687971716214161,NULL,FALSE,11567,0,'KwaZulu-Natal','ZAKZN')
  008d 0000 0000 2d91
  
  short_id is part of the ID

  # Mendix Object GUID structure:
  #      +----------------+-----------------------------------------+-------+
  #      |    short_id    |              object_sequence            | random|
  #      +----------------+-----------------------------------------+-------+
  # of bits:    16                             41                       7

  https://forum.mendix.com/link/questions/4441
  >
  The long version is that in Mendix 4 we don't automatically insert objects into
  the database when creating them, for performance reasons and for making
  transient objects work. Obviously we still need unique identifiers for objects
  which is why we reserve batches of identifiers up front.
  
  Multiple Mendix Runtime servers with the same application can operate on a
  single database so this is all done neatly in transactions such that one server
  can claim a set of identifiers and immediately updates the table keeping these,
  the next server will never claim the same range.
  
  These identifiers are currently reserved in sets of 100 at a time and their
  current number is kept in a special system table called
  mendixsystem$entityidentifier with 1 row per entity. These rows are stored by
  entity id, the entity name can be found in mendixsystem$entity.
  
  When identifiers are about to run out, we can do an asynchronous database query
  claiming some more identifiers. If a runtime server stops then the ids not
  spent are basically lost, which is not an issue since the identifiers are 48
  bits.
  
  The actual identifiers you will see in the id column are made up of these 48
  bits (least significant) AND an additional 16 bits (most significant)
  indicating what entity type they actually are. This is needed for inheritance
  and this part is fixed for a certain entity in a specific database. This number
  is the column short_id in the entityidentifier table.
  
  I honestly think you'll have too much trouble getting this to work in a
  guaranteed bug-free way, and any mistakes here could seriously corrupt your
  database. Additionally, we can change this implementation since this is
  internal server logic. Is there no other way to do what you want to achieve?


Q: menus don't work in topbar
A: 
  1. Make sure you have:
  
    .layout-atlas .region-topbar {
        z-index: auto;
    }
  
  2. Make sure there's no overflow:hidden in any parents

Q: Prevent browser save password for a text input with "Show as password": Yes
A:
  Add an HTMLSnippet widget above the fields:

    <!-- The text and password here are to prevent FF from auto filling my login credentials because it ignores autocomplete="off"-->
    <input type="text" style="display:none">
    <input type="password" style="display:none">

Q: autocomplete widget (dropdown-like)
A: 
  https://marketplace.mendix.com/link/component/2695
  https://github.com/AuraQ/AutoCompleteForMendix

Q: remainder
A: A mod B

Q: com.mendix.m2ee.api.AdminException: An error occurred while initializing the Runtime: ERROR: relation "mendixsystem$version" does not exist
A:

Q: add trigger button to the right of the regular text input
A:
  wrap the input and the button with a container, set the container class custom-input-with-trigger-container
  add the following to the custom styles:

  /* in 10x container is an <aside> and in 9x it's a <div> */
  .custom-input-with-trigger-container {
  	position: relative;
    
  	&> div:first-child {
  		&> div > input {
  			margin-right: 50px; /* margin-right also makes the border around input behave nice */
  		}
  	}
    
  	&> :nth-child(2) {
  		position: absolute;
  		right: 0;
  		top: 0;
  	}
  }

Q: calculate UTF-8 string length in bytes
A:
  length(replaceAll($currentObject/OriginalTitle,'[\u0000-\u07ff]',''))+length(replaceAll($currentObject/OriginalTitle,'[\u0000-\u007f]',''))+length($currentObject/OriginalTitle)

  or in js action:

  // returns the byte length of a utf8 string
  export async function GetUtf8Length(str) {
  	// BEGIN USER CODE
      var utf8Length = 0;
      for (var n = 0; n < str.length; n++) {
              var c = str.charCodeAt(n);
              if (c < 128) {
                  utf8Length++;
              }
              else if(c < 2048) {
                  utf8Length = utf8Length+2;
              }
              else {
                  utf8Length = utf8Length+3;
              }
      }
      return utf8Length;
  	// END USER CODE
  }

Q: get React Component instance
A:
  React widgets are wrapped with dojo mxui.widget.ReactCustomWidgetWrapper
  It stores no reference to the React component
  Its domNode.parentNode is null
  Its _markerNode property is an <!-- HTML Comment --> and is a previous sibling of the actual widget node

  It's easier to skip obtaining ReactCustomWidgetWrapper and find the React Component directly from the widget DOM Node:
    FindReact(dom) // see below
  Simplified:
    dom.__reactFiber$xxx.return.stateNode
  
  Alternatively, the React Component can be found via:
    (obj as ReactCustomWidgetWrapper)._markerNode.__reactContainer$xxx.child.child.stateNode  

  // https://stackoverflow.com/a/39165137/447503
  function FindReact(dom, traverseUp = 0) {
debugger;
      const key = Object.keys(dom).find(key=>{
          return key.startsWith("__reactFiber$") // react 17+
              || key.startsWith("__reactInternalInstance$"); // react <17
      });
      const domFiber = dom[key];
      if (domFiber == null) return null;
  
      // react <16
      if (domFiber._currentElement) {
          let compFiber = domFiber._currentElement._owner;
          for (let i = 0; i < traverseUp; i++) {
              compFiber = compFiber._currentElement._owner;
          }
          return compFiber._instance;
      }
  
      // react 16+
      const GetCompFiber = fiber=>{
          //return fiber._debugOwner; // this also works, but is __DEV__ only
          let parentFiber = fiber.return;
          while (typeof parentFiber.type == "string") {
              parentFiber = parentFiber.return;
          }
          return parentFiber;
      };
      let compFiber = GetCompFiber(domFiber);
      for (let i = 0; i < traverseUp; i++) {
          compFiber = GetCompFiber(compFiber);
      }
      return compFiber.stateNode;
  }

Q: close all dialog messages
A:
  dijit.registry.toArray().filter(x => x instanceof mxui.widget.DialogMessage).forEach(x => x.onClose());

Q: custom javascript
A: 
  From Marketplace install HTML Snippet
  Add the addon widget HTML Snippet to the form
  In Widget properties switch to Javascript mode

  An empty Div will be created

  The js is eval'ed, attempt to return will fail. 
  Evaluation error is caught and displayed in a nested balloon.

  In case of External File script it's executed synchronously in a tag: <script src="custom.js?cacheid">
  where custom.js is a file inside theme/web/
  jquery will not work without hacking.
  To use JQuery provided by HTMLSnippet in external .js files one could surround the .js file contents:

    const htmlWidget = dijit.getEnclosingWidget(document.currentScript.parentElement);
    htmlWidget._mycode = function($) {
    ...
    };
    htmlWidget.contents = "this.widget._mycode($);";
    htmlWidget._evalJQueryCode();

  
  In case of inline script
  A non-JQuery snippet is run synchronously
  `this` refers to the current widget (dojo based)

  A JQuery snippet is deferred by window.require(["jquery"], function(jQuery) { ... })
  `this` refers to an object:
  {
      jquery: jQuery, // pass JQuery as the context of the immediate function which will wrap the code snippet
      widget: widget    // pass the HTMLSnippet widget context itself, so the code could use listen/addOnDestroy
  }
  
  widget.__proto__.declaredClass === "HTMLSnippet.widget.HTMLSnippet"
    "mxui.widget._WidgetBase"
      "uniqName_0"
        "dijit._WidgetBase"
          "dijit.Destroyable"
            "dojo.Stateful"


  this.contextObj is an optional current instance of an entity
  
  this.domNode === this.srcNodeRef refers to the widget Div HTMLNode

  this.domNode.parentElement refers to the container HTMLNode
  
  dijit.getEnclosingWidget(this.domNode.parentNode) returns the parent Dojo widget (In Mendix 9.24 Container is not a Dojo widget)

  To find a neighbour widget use:
  HTMLNode.querySelectorAll('.mx-someclass'); 
  
  See
  https://github.com/mendix/HTMLSnippet
  https://github.com/mendix/list-view-controls/blob/e1cfe0bb16678201581210381fa07db1e4cfc1e2/src/TextBoxSearch/components/TextBoxSearchContainer.ts#L89

Q: Find widget neighbours
A: a = dijit.findWidgets(this.domNode.parentNode);

Q: Find a sibling of a specified type
A: var aaareportparam = aaasiblings.find(djw => djw.isInstanceOf(reporting.widget.ReportParameter));

Q: set default ReportParameter widget value
A: aaareportparam.mxcontext.setParam(aaareportparam.parameter, aaathissnippet.contextObj.getGuid());

Q: xpath exists
A: It's always 'exists'

Q: xpath self reference direction
A:
  by default
    A_B = $x
  To reverse the direction use 
    A_B[reversed ()] = $x
  https://docs.mendix.com/refguide/query-over
Q:  filter SQL log
A:
  (requires a plain text log file)
  
    fn_greplog() {
      local new_msg_mark=${1:?}
      local pattern=${2}
      local neg=${3}
      local subprogram='/'"${pattern}"'/{p}'
      if [ ! -z "$neg" ]; then
        subprogram='/'"${neg}"'/!{'"$subprogram"'}'
      fi
      echo "subprogram=$subprogram"
      shift 3
      sed -n \
        -e '/'"${new_msg_mark:?}"'/!{H;b L20}' \
        -e ':L10' \
        -e 'x' \
        -e "$subprogram" \
        -e ':L20' \
        -e '${s/..*//;t L10}' \
        "$@"
    }
    
    tail -F mendix.log | fn_greplog '^....-..-..T..:..:......Z' 'DEBUG..ConnectionBus_Retrieve..SQL:' '"system\$'



Q: current object of a context
A: legacy, used in BCo or the [%CurrentObject%] from the client
  https://forum.mendix.com/link/questions/7036


Q:
  Import Mapping marks existing objects dirty even though no value actually changes
A:
  Unlike "Change Object" action Import Mapping does not use 
  com.mendix.basis.action.user.Changer.setMemberValue
    (or Changer.isDifferentValue())
  and instead calls IMendixObject.setValue() directly

Q: Select Page internals (Select All, Deselect All)
A:
  notice: pageSelectionTopic, initialSelection, constraint
  
  "constraint" is "Selectable Objects"
    https://docs.mendix.com/refguide/input-reference-set-selector#selectable-objects
  
  
  back:
      _sharePageSelection: function() {
          const e = this.getSelected();
          (this.initialSelection.length !== e.length || this.initialSelection.find((t=>!e.includes(t)))) && o(this.pageSelectionTopic, e)
      },
  
  forward:
  
  mx.ui.openForm2 = async ƒ (e,n,r,o,a)
  e: "JflowImport/FilterVAType_Select_2.page.xml"
  a: {
      "name": "JflowImport/FilterVAType_Select_2.page.xml",
      "location": "modal",
      "resizable": true,
      "formParams": {
          "initialSelection": [
              "33776997205283421"
          ],
          "pageSelectionTopic": "1630746742541-11",
          "listViewSelectionMode": "multi",
          "dataSourceMixin": {
              "extra": {
                  "constraint": "[JflowImport.FilterVAType_JsonImport = '34058472181989782']",
                  "offlineConstraints": {
                      "type": "function",
                      "name": "=",
                      "parameters": [
                          {
                              "type": "attribute",
                              "attribute": "JflowImport.FilterVAType_JsonImport",
                              "attributeType": "ObjectReference"
                          },
                          {
                              "type": "token",
                              "name": "currentObject"
                          }
                      ]
                  }
              }
          }
      }
  }

Q: pass a parameter to a select page
A:
  Some findings
  When used on a select page a data grid (or a list view) must not be inside a data view,
  otherwise the pre-selection and the select button won't work.
  It means that if you somehow pass a parameter you still can't use it in the data source.
  So it's easier to just add a singleton entity.
  You can pass an XPath defined on the Selectable Objects tab as a parameter.
  Example for HTML Snippet:
    var constraint = this.mxform._params.dataSourceMixin.extra.constraint;
    this.mxform._params.dataSourceMixin.extra.constraint = "";
    var renditionMxId = constraint.replace(/.*'(.*)'.*/,"$1");
    debugger;

Q: error event
A: This re-throws an existing error. It's only valid in error handling flow.

Q: No access to microflow X for user role Y
A:

Q: Removal or rename of attributes in external entity key for entity 'X.Y' is not supported.
A: delete and re-add the entire entity from the Data Hub palette

Q: flow is not accepted by origin or destination
A: first choose "set error handling" from context menu, then mark the flow as error handler

Q: Internationalize display values in Reference Selector
A: https://forum.mendix.com/link/questions/5419
  TL/DR: Use a calculated attribute.
  For languages, instead of an attribute with a code, associate your entity with System$Language

Q: Dropdown without association
A:
  Custom Dropdown https://marketplace.mendix.com/link/component/117326
  It really is fully customizable, but setting its mandatory properties is a lot of work
  Also, the English translation is awful so instead of guessing what those properties do better see the doc and the test application here https://github.com/mendixlabs/CustomDropdown/tree/main/tests/testProject

Q: Where's the mx javascript API documented? mx.ui.showLogin(), mx.data.action() and such.
A: https://apidocs.rnd.mendix.com/9/client/mx.ui.html

Q: call microflow with multiple parameters from JS
A: 

  mx.data.action allows for at most 1 non-list object of each entity type
  plust one list. This limitation comes from the JSON format of the
  "executeaction" action: all the non-list parameters are passed in the
  "context" array of guids and the parameter names are just unsupported.
  If you pass more than one GUID of the same entity type then on the server side
  one of them will be mapped to all parameters of this type and the others will
  be discarded.

  The more advanced "runtimeOperation" action used by buttons and nanoflows
  allows passing the parameter names and values, but the JS API to call it is
  inaccessible from user scripts: the "runtimeOperation" action JSON is created
  by the inaccessible class OnlineData. The common function used for both
  "runtimeOperation" and "executeaction" is also inaccessible.

  The public property mx.onlineData was removed somewhere in 2020.

  Finally, there's no way to directly call "runtimeOperation" using
  window.fetch() because the value of X-Csrf-Token received during login is also
  inaccessible. 

  Resolution: you probably can wrap window.fetch() and convert "executeaction"
  JSON into "runtimeOperation" JSON when necessary. The JSON format of
  "runtimeOperation" can be guessed by playing with the inaccessible
  OnlineData.executeMicroflow(). Currently, an istance of OnlineData can only be
  obtained by using the debugger.

  The other parts of the JSON like "objects" and "changes" can be copied from
  "executeaction": mx.data.action does a good job filling them for you.

Q: set user role in micrflow
A: 
  retrieve the userrole object by xpath of the form [id='[%UserRole_RoleName%]']
  Assign as a regular association

Q: empty string
A: a string can be empty (null) or it can be empty string (''). You need both checks

Q: button next to input field
A:

Q: "raise an error when the microflow returns false", validation messages and Image Uploader widget don't work together
A:

Q: Trace SQL
A: 
Q: default administrator credentials
A: username: MxAdmin and password: 1

Q: Check the state of an object ("Instantiated", "Committed", dirty) without using java
A: 
  somewhat - isNew()
  isChanged() is only available in Java
  Warning: isSynced() is only meaningful in offline apps in Client Expressions

Q: how to debug custom java
A: locally - when you deploy for Eclipse it creates a launch configuration for that. Remotely, I don't know.

Q: Error during startup in Eclipse
A: eclipse project properties -> Java Build Path -> Execution Environment -> JavaSE-11

Q: Log a message
A:
		ILogNode logger = Core.getLogger(ENU_LogModule.MyFirstModule.name());
		logger.info("some");
		logger.error(new Exception());


Q: get current request
A:
	// BEGIN EXTRA CODE
	private String getClientIp() {
		IContext ctx = getContext();
		Optional<IMxRuntimeRequest> orr = ctx.getRuntimeRequest();
		String realIP = null;
		if (orr.isPresent()) {
		    IMxRuntimeRequest rr = orr.get();
		    HttpServletRequest request = rr.getHttpServletRequest();
		    realIP = rr.getHeader("X-Real-IP");
		    if( realIP == null )
		        realIP = rr.getHeader("X-Forwarded-For");
		    if( realIP == null )
		        realIP = rr.getRemoteAddr();
		}
		return realIP;
	}
	// END EXTRA CODE


Q: Redirect the logs to a custom logging framework
A:
  Warning! the method processMessage() is called in a dedicated thread. It's pointless to try enrich the log message with Thread.currentThread.getName()
  
  In "After startup":
	@java.lang.Override
	public java.lang.Void executeAction() throws Exception
	{
		// BEGIN USER CODE
		LogSubscriber subs = new LogSubscriber("mysubscr", LogLevel.TRACE) {
			@Override
			public void processMessage(LogMessage arg0) {
				System.out.println(arg0.message);
			}
		};
		Core.registerLogSubscriber(subs);

Q: Jave Thread name in log messages to extract message sequences for specific threads.
A: It's not logged. See what object is passed to com.mendix.logging.impl.LogManager.registerLogSubscriber and maybe reconfigure it or extend its class.
  Or register your own LogSubscriber that logs the current thread and or current HTTP request.

Q: Integrate Java Actions that use other logging frameworks
A: In "After startup"
  register an appender that calls Core.getLogger ... info/error/...
  Make sure it doesn't recursively call the same logging framework via LogSubscriber


Q: Reference Selector vs Reference Set Selector vs Input Reference Set Selector
A: These widgets allow editing associations. They require the current object to be an association owner. They still require the "Save" button.

Reference Selector only works with "one to x" associations. It can associate one or zero parent objects with the current object.
In drop-down mode it displays a chosen attribute of the parent object.

The other two widgets only work with "many to many" associations" and they require a _Select page with a data grid (preferred) or
a list view of parent candidates and a "Save changes" button.
When a pop-up with a data grid is invoked by one of the selector widgets some of its rows are auto-selected and the "Select" button
associates the selected parents with the current child object without committing it.
When a pop-up with a list view is invoked by one of the selector widgets it gains an implicit checkbox widget in each row of the list
view and the "Save changes" button associates the checked parents with the current child object without committing it.
Important: the filtering must be done on the "Selectable Objects" tab of the reference set widget, not in the grid or list view data source.
In the "Selectable Objects" xpath you can use the '[%CurrentObject%]' token to filter by the child object.
There is no '[%CurrentObject%]' in Select Page.

Input Reference Set Selector looks like a readonly dropdown in which the chosen attribute of the selected parents is
shown in a comma-separated list. It also has an active trigger button that invokes the _Select pop-up. In the pop-up
already associated objects have their checkboxes checked.
The current entity can be non-persistable, but the associated entity MUST be persistable.

Reference Set Selector looks like a data grid and displays the attributes of parent objects. By default it has
"Search Bar Toggle", "Add", and "Remove" buttons. The "Add" button invokes the _Select pop-up.
Both the current entity and the associated entity MUST be persistable.
In the pop-up already associated objects don't have their checkboxes checked and it looks like a bug in Mendix
8.17.0. However, checking them does not cause any error.
Besides, Reference Set Selector ignores the readonlyness of the current container.


Q: Why at https://gettingstarted.mendixcloud.com/link/module/36/lecture/200/3.4-Knowledge-Check
  Question 4: In which of the following microflows would applying entity access NOT be recommended?
  [x]A microflow to display a company overview to anonymous users.
  and not
  [ ]A microflow that generates a report on the productivity of all the app users.

Q: standard list view CSS classes
A: 
  ,

Q: Ternary operator (?:) in expressions
A: In Mendix if-then-else is not void and can be used in expressions: 'c' + (if true then 'a' else 'u') + 't'

Q: What kind of tokens does the at-sign (@) precede in expressions? Ex:
  @EPM_REF_APPS_PROD_MAN_SRV.EPM_REF_APPS_PROD_MAN_SRV + '/' + toString (EPM_REF_APPS_PROD_MAN_SRV.EntitySetNames.Products) + '?$filter=substringof(SubCategoryName,''' + urlEncode($SearchCriteria/Term) + ''')'
A: Constants

Q: constants overridden with java resolve to old values in microflows and consumed OData services
A:
  New values take effect only after a hot re-run which drops the cached constant values in microflows and consumed OData services.
  Workaround: create a java action that evaluates the constant itself. 
  Surprisingly, when used as a header value in a REST Call activity it does not use a cached value.
  see also com.mendix.basis.impl.MxRuntimeImpl.reloadModel()

Q: How to implement a custom microflow activity that runs other activities placed in it just like the Loop activity does?

Q: Custom functions in expressions (client or runtime or both)?

Q: How to delay searching in a data widget until the search button is pressed?

Q: Custom widget with a property where I select another widget on the page?
A: You can't. Instead use a string property and use the widget name. See List View Swipe/Target list view.
  Or have no property and just dynamically find the adjacent widget. See List View controls.
  Or if the widget to choose is an input widget then use a property of type "Attribute" and set it to the same attribute as the input widget. Then find the widget by the attribute.

Q: When are alerts cleared?

Q: if starting with Mendix 7 the object cache only exists on client how does the cached retrieve by association work?

Q: How to create an error handler in a microflow?
A: Right click an action and choose "Set error handling...", drag an outgoing sequence flow, right click the arrow and choose "Set as error handler" (important).

Q: View the development database
A: Console view: Advanced/Start built-in database viewer (maybe requires a running app)

Q: https://gettingstarted.mendixcloud.com/link/module/37/lecture/3066/4.4-Summary
  > and discussed utilizing the power of the single sign-on
  Where?

Q: How does Retrieve work in microflows in case of no read access to _some_ attributes (when entity access is enforced)?

Q: Does Entity Access apply to Retrieve in Microflows without that checkbox checked?
A: looks like it doesn't

Q: Do Log Levels persist between runs in Studio Pro?
A: yes

Q: Why at https://gettingstarted.mendixcloud.com/link/module/374/lecture/3053/7.8-Knowledge-Check
  Question 1: When localize is set to No, the date displayed in the client is based on the:
  [x]Client time zone
  and not
  [ ]UTC value
  ?
A: must be poor wording. Tests show that it's based on the UTC value

Q: Why at https://gettingstarted.mendixcloud.com/link/module/374/lecture/3053/7.8-Knowledge-Check
  Question 3: If both the Project and User time zone are set, the value of the localized DateTime attribute displayed in the client is according to:
  [x]The Client timezone
  and not
  [ ]The User timezone
  ?
A: The answer is correct. The localized time is based on the browser timezone and ignores the user timezone.

Q: In what timezone do date arithmetic functions in microflows work, especially when working with non-localized date attributes?
A: in the caller timezone. Alternatively, use the xxxUTC() variants of the functions like addDaysUTC()

Q: how to change association direction in domain model?
A: the button is only available in Mendix Studio (Web)

Q: Do non-persistable objects stay after page refresh?
A: no

Q: When retrieving in batches with custom Limit/Offset it's very easy to miss some objects or process them twice if the records were deleted/inserted during retrieval
A: this is mentioned in the courses: https://gettingstarted.mendixcloud.com/link/module/21/lecture/85/3.3-Using-Batches
  > The new record set is retrieved, but since you didnt define a sort order, the retrieve arbitrarily returns the list in no specific order
  So use sorting and maybe it will help. Sorting by internal id is not supported anyway and we don't know if the internal ID monotonic. So use autonumber attribute.

Q: Why instead of setting a role-based home page for Anonymous I have to make the login page default home page and set the role-based home page for every other role?
  https://gettingstarted.mendixcloud.com/link/module/183/lecture/1426/3.7.3-Creating-a-Custom-Login-Page
  > Open the Project Navigation and set the newly created login page as the Default home page.
A: No good reason. Anonymous-specific home page works fine.

Q: When uploading a logo via Theme Customizer (web) a GUID is appended to the file path in the .scss file. What is it?

Q: Send %CurrentObject% to a microflow associated with the "New" button in a data grid
A: data grid button "New" pre-associates the new object when the grid datasource is "By Association". It can't do that for other data sources.

Q:
  https://gettingstarted.mendixcloud.com/link/module/184/lecture/1440/4.3-The-Reference-Set-Selector
  > The reference set selector is the widget you use in Mendix to select associated objects ...
  > You can configure the widget to show the options in a dropdown or in a select page
  You can't make it dropdown


Q: buttons with pull-right class have inverted order in design mode

Q: New pages not listed in "page access"
A: Fill "Visible for" in page properties

Q: Before Commit returning false, but without error does not stop a microflow (it prevents "Save changes" on click action though)
Some autocommitted objects still existed on logout for session 'demo_administrator'.
Autocommitted objects are newly created objects which were not yet committed, but are inserted into the database because an associated object was committed.
Autocommitted objects should explicitly have been committed, please check your model and apply the necessary changes. The autocommitted objects have been deleted from the database to prevent database corruption.Number of autocommitted objects per type which still existed for this session:
- Expenses.TeamMember: 1 object(s).

Q:
A:
  When an object is auto-committed it will not trigger the commit object events nor
  domain model validation rules, this has always been the behavior since the concept
  of auto-commit was introduced.

Q: Image Viewer not updated when new image is selected in Image Uploader widget
A: Image Uploader actually uploads the file only when you click the "Save" button on the same page. It somehow detects the proper button and chains itself to the button's action.

Q: How does the Image Uploader widget subscribe to the form submit and how does it distinguish real submit and the cancel action? How does it make sure the upload precedes the user-configured action?

Q: how to cancel changes when editor page abandoned by clicking navigation menu?


Q: Theme Customizer page
A: Mendix Studio, "brush" button at bottom-left

Q: "Edit in Studio" button is missing
A: Go to "My Apps", invoke the ellipsis "..." menu and click "Edit in Studio"

Q: "Mendix Studio is not enabled for this app. Read how to enable Mendix Studio in https://docs.mendix.com/developerportal/settings/general-settings"
A: In App Settings/General click "Enable Mendix Studio"

Q: No Development Line Selected
  Mendix Studio is not yet enabled for a development line of this app.
  Assign it to a specific development line in Mendix Studio Pro to start
  collaborative development!
  https://docs.mendix.com/refguide/collaborative-development

Q: "Could not enable the branch for Mendix Studio"

Q: Regular input widgets label width

Q:
  From "Unlocking True Collaboration"
  > Now you should be able to see the file in your project directory if you follow the path: Project directory/javasource/myfirstmodule/datasets/
  Actually the data set is stored in the project .mpr file

Q: This code from Crash Course needs a comment why "==" is used instead of equals():
        public boolean hasRequiredSkill() {
            return employee.getSkill().toString() == this.skill;
        }
        
Q: Non-descriptive field names in generated code:
  public class Java_action extends CustomJavaAction<java.util.List<IMendixObject>>
  {
  	private IMendixObject __Parameter;
  	private usermanager.proxies.Employee Parameter;
      private IMendixObject __Parameter_2;

Q: get Mendix object ID
A: CommunityCommons/GetGUID()

Q: get object by ID string
A: 
  Mendix 7 had the form: id('ID_123423462342 ID_123423462343 ID_123423462344')
  https://docs.mendix.com/refguide7/xpath-id

  There's an alternative syntax:
  https://docs.mendix.com/refguide/xpath-expressions
  //Sales.Customer[Sales.Customer_Order = 'ID_124123512341']
  
  However they both aren't supported by Mendix 8+

Q: xpath constraint with unrelated entities
A: not possible

Q: How to filter in Retrieve by ID? How to obtain the ID of an object? How to sort in Retrieve by ID?
A: you can't

Q: current object in client xpath
A:

Q: escape escaping in XPath
A: concat() is not supported. Use XML entities. Ex:
  Larry "Basher" O'Niven
  [attr = 'Larry "Basher" O&apos;Niven']
  [attr = "Larry &quot;Basher&quot; O'Niven"]
  This totally works in Mendix 8 in datasource constraints in data widgets

  Community Commons have the utility function
    XPath.valueToXPathValue(Object)

Q: escaping in OQL
A:

Q: escaping in expressions
A: partial answer: SQL-like double apostrophe
  @GWSAMPLE_BASIC.GWSAMPLE_BASIC + '/' + toString(GWSAMPLE_BASIC.EntitySetNames.ProductSet) + '(''HT-1000'')'
  This produces the GET request https://sapes5.sapdevcenter.com/sap/opu/odata/iwbep/GWSAMPLE_BASIC/ProductSet('HT-1000')

  urlDecode('%FF') can also be used

Q: Why can I compare '[%CurrentUser%]' with the association Xxx.Xxx_Account and not Xxx.Xxx_Account/System.Account ?
A: Because the alternative form is: Xxx.Xxx_Account/System.Account/id = '[%CurrentUser%]'

Q: unsaved changes on an in-memory object remain when you cancel editing

Q: how to bookmark an application page?
A: Use the Deep Link module from App Store

Q: Mobile-specific homepage only displayed in Mendix Mobile app, but not in mobile Chrome
A:
  There are eight Navigation Profiles that Mendix offers:
      Responsive
      Hybrid tablet app online
      Hybrid tablet app offline
    ! Hybrid phone app online
      Hybrid phone app offline
      Tablet browser
    ! Phone browser
      Native phone

Q: My app doesn't have user management pages
A: Add to navigation the page "Account_Overview" from the "Administration" module.

Q: "Free App" "MxAdmin" unknown user
A: login as demo_administrator. A password for MxAdmin can probably be set with an "After Startup" microflow.

Q: two texts in one cell are sometimes positioned in one line
A: change the Render mode from Text to Paragraph for text widgets so they will show up as separate pieces of text instead of on the same line

Q: validation rule "unique" case sensitive?
A: 
  https://docs.mendix.com/refguide/case-sensitive-database-behavior
  HSQLDB - Case insensitive for sorting, comparing, and string functions.
  POSTGRESQL - Sorting and comparison are case sensitive. They cannot be configured.
    String functions are case insensitive as they are implemented using the ILIKE SQL operator.
  My tests show that sorting is case-insensitive in PostgreSQL

  As for built-in database Mendix generates DDL with the type VARCHAR_IGNORECASE instead of VARCHAR.

Q: which objects are saved by the "Save Changes" action?
A:
  In <= 9.5.1 all objects in the current form modified by user or microflows/nanoflows are committed
  In >= 9.12.4 only objects in *Editable* data views/list views in the current form are committed
  (A "Listen to widget" data view only commits the currently selected object)


Q: run microflow on change of object attribute without Save changes

Q: all validation messages from a microflow disappear if another microflow called "Change Object" with "Refresh in client"

Q: refer "Done" stories in a commit?

Q: add multiple tags to glyphicons and search by tags?
A: The only tagged icons I know are "cog" and "wrench" and their tag is "settings".

Q: validation messages make page resize and the save button escapes from under the mouse cursor when trying to save

Q: How to move arrows in Domain Model?
A: Select the association and then drag its end along the border of an entity


Q:
  During the development of your app, you can preview it whenever you like. As long as nobody is using the app yet, this is perfectly safe to do. Once the app is in production (meaning, it is being used by end-users), be careful to only publish the app once a feature is built completely. Otherwise, your end-users could be confronted with incomplete functionalities.
  
  Studio Pro will not allow you to preview while there are errors in your app, so you cant accidentally break an app thats running in production.

  What?


Q:
Repeat these steps for the caption of the button.
What?





addDays($TrainingEvent/StartDate,
$TrainingEvent/
MyFirstModule.TrainingEvent_Course/
MyFirstModule.Course/Duration)

