Q: preview mode privileged client
A:
  - in design-time environment fill the global registry tab
    see com.emc.xcp.builder.ui*.jar/internal.com.emc.xcp.builder.ui.preview.RepositoryEndpointPreviewContributor
    The temporary dfc.properties and dfc.keystore are in %TEMP%
  - launch preview mode
  - DA/Client Rights Management/Privileged clients/Manage Clients
  - add and approve
  - update dm_client_rights objects set allow_all_roles = true where client_id = '...';

Q: "On Fragment Load" conditional trigger doesn't work with fragment inputs 
A: The event fires before the inputs are ready. Use an intermediate widget's "change" event. The "setValue()" call is deferred so all the inputs will be ready when "change" fires. 

Q: check string is valid number
A: isNumber(getJavascriptPropertyValue('parseFloat('+<quotedString>+')'))
  (don't use xCP isNumber() or isNaN() directly: they don't do what you think they do)

Q: clear Number Input
A: set value: { 0 }[1]

Q: file selector
A:
Set List of File IDs
  setFileIDs: function(fileIDs)
  // accepts array to merge with existing entries
  // cannot be used to remove entrie

fileselector.removeBtn

Q: expression breakpoint
A: getJavascriptPropertyValue('(()=>{debugger;})()')

Q: get array element at variable
A: No such function

Q: eval
A: getJavascriptPropertyValue(s)

Q: field's isValid
A: = (value != '' OR NOT mandatory) AND (value == '' OR NOT (<Validation-Expression>))
  * see the dropdown list specifics

Q: mandatory
A: only affects blank fields. Red mark near the label. Can be cleared dynamically to remove the red mark.
  * see the dropdown list specifics

Q: validation 
A: only affects non-blank fields
  * see the dropdown list specifics

Q: dropdown list validation
A:
    Using properties of a dropdown in validation expression may give weird results.
    It is recommended to create intermediate hidden value displays for
    "value" and "selectedValue" and use them in the validation. The event triggering
    the validation should be changed from dropdown.change to the intermediate widgets
    change.

Q: dropdown list disallow arbitrary value
A: value: widgets.<widget-name>.selectedValue

Q: inputPropertyChange
A: fired by this.fireEvent("inputPropertyChange") from datasource setInputProperty() even when the value not really changed

Q: automatically disable button during stateless process
A: The process must not have triggers on the "Behavior" tab and
   the buttons must have "Invoke:" "Data service instance" and
   "Data service instance: " name of the process.

Q: xCP functions that run in browser context
A: xcp-functions-16.4.0060.0070.jar\xcp-core-functions\content\xcp\core\**\*.js

Q: Result List from stateless process row number
A: max of all multivalue properties

Q: Cache-Control: max-age=31100000
A:
  TestApplication-1.0.0\WEB-INF\lib\Services-16.4.0060.0070.jar\com\emc\xcp\config\web\deployment-ui.properties

    StaticApplicationResourceCacheSeconds=31100000
    ComponentResourceCacheSeconds=31100000

Q:  "can be used to sort" is greyed out in a Result List column properties
A:  You have an Advanced Repository Query attached to the Result List and its <output>s aren't sortable.
    Open the query, go to the "Dataset" tab and click any column in the "Output Columns" section
    There's the checkbox "Enable Sorting" in the Properties view, "General" tab
    If there's no such checkbox, make sure that the query string ends with "order by ?".

Q: "cannot load artifact" error
A:
- The artifact was opened for editing when XCP was closed
- The artifact file was deleted in the source repository
Solution: delete the .index file

Q: "Refresh" group box missing in on the "General" tab of an Iteraction
A: The stateless process has no output variables. Fix the process and re-add the interaction

Q: group/process/type already exists in the repository
A: Caused by incomplete deploy. Restore last good snapshot and try again

Q: No business events tab in a custom relation type
A: see the business events tab in the "Source Model" (parent) type

Q: Business events triggered
A: XcpTransactionListener.onPreCommit

Q: inherit context menu of parent type
A: unsupported

Q: result list "disable default navigation"
A: Select to override the default behavior of the first column of the results list widget that is represented as a link

Q: result list disable auto resize
A: Style/Height/ "px"

Q:
  java.io.FileNotFoundException: Specified source file does not exists: D:\edflux\EducationApplication\configuration\asdasdasd_config.xml
A:
  Do not ever delete the folder "configuration". If you did,
  delete and re-create the run configuration

Q: 
  Unsupported function name length
  No server-side functions loaded
A:
  Some java module has missing jar

Q: UI expressions: multival[0] when empty
A:

Q: not lose mappings switch single <-> multi
A:

            <From>
                <Value>/Collection/Object[0]/finishing_packaging_instruc</Value>
            <From>
                <Value>/Collection/Object[ALL]/finishing_packaging_instruc</Value>


  To>/Process Data/Variables/out_instructions&lt;/To>
  To>/Process Data/Variables/out_instructions[0]&lt;/To>


  - Change variable types, do not open mapping. Save.
  - 
  sed -b -i 's,\(To>/Process Data/Variables/[^&]*\)&,\1[0]\&,g' EducationApplication/Artifacts/Processes/get_print_productio.process
  sed -b -i 's,\(&lt;From>[^>]*&lt;Value>/Collection/Object\)\[0\],\1[ALL],g' EducationApplication/Artifacts/Processes/get_print_productio.process

  - refresh

Q: Process Variables
A: Process Properties/Data


Q: drop attribute
A: 
  - before deleting: click attribute and see where used
  - delete attribute, save
  - re-open all artifacts where was used and save

Q: relationship "Source Model", "Target Model"?
A: "Source Model" = parent, "Target Model" = child

Q: find usages
A: The "Where used" view in the bottom-left corner

Q: Unable to deploy application
A:
find /u01 -type f -name "*.log" -mtime -1 | xargs ls -lt

-rw-r--r--. 1 efxdm efxdm  138517 Nov  5 12:28 /u01/efxd/share/wildfly9.0.1/server/DctmServer_MethodServer/logs/bpm-runtime.log
-rw-rw-rw-. 1 efxdm efxdm   11371 Nov  5 12:28 /u01/efxd/dba/log/0001e240/agentexec/agentexec.log
-rw-rw-r--. 1 efxdm efxdm  900785 Nov  5 12:27 /u01/efxd/xPlore/jboss7.1.1/server/DctmServer_PrimaryDsearch/logs/xdb.log
-rw-r--r--. 1 efxdr efxdr      24 Nov  5 12:24 /u01/efxdr/XDA_DATA/catalog/xDB/log/xhive_checkpoint.log
-rw-rw-r--. 1 efxdr efxdr 1105920 Nov  5 12:24 /u01/efxdr/XDA_DATA/catalog/xDB/log/xhive_0000000002.log
-rw-rw-r--. 1 efxdr efxdr  151432 Nov  5 12:24 /u01/efxdr/xDA/bin/log4j.log


Q: xcp version
A: 
    Help > About > Build;
    or
    plugins/com.emc.xcp.builder.workspace_*.jar
      /internal/com/emc/xcp/builder/workspace/project/util/ArchetypeVersions.properties
    or
    plugins/com.emc.xcp.designer.executionenvironments_*.jar
      /plugin.xml
        top level <environment ...>
    
    
    16.4.0030.0148
    Ma
       Mi
         PPPP
    
    16.4 Patch 3

Q: Invalid combination of DataPolicy MINIMAL and deploying to a PRODUCTION environment, only MAINTAIN is supported
A: Edit run configuration

Q: xCP project moved
A: 

Open:
Applications\.wsdata\ws_data.xwd
Change the path:
MRU_WORKSPACE_LOCATION=path\to\projectAsDAsdasdASD

Open:
Applications\workspaces.xml

Remove the workspace

Delete the folder in Applications\

See also
Applications\ajwf\.metadata\.plugins\org.eclipse.debug.core\.launches\Standard XCPApplicationProject Build.launch
d:\ACDC-Code\acdc\acdc\ajwf\configuration\run_config.xml

Q: debug javascript
A: ?nominify
(remove ?reload to make breakpoints persistent)

Q: debug css
A: ?nominify

Q: custom theme */src/main/webapp/js/resources/css/xcp-custom-theme-*.css
A: 
    git clone <theme-project>
    cd <theme-project>/MaterialTheme
    ant

    put to xcp project,

    http://cdn.sencha.com/cmd/6.1.3.42/jre/SenchaCmd-6.1.3.42-windows-64bit.zip
    xcpdesigner.ini
    -Dxcp.theme.compiler.location=C:/Sencha/Cmd/6.1.3.42
    Master page -> Basics tab -> Application theme dropdown -> Apply button


Q: environment settings (xms)
A:  xCPDesigner_2.3P03\Applications\

Q: restart tomcat
A: 
flxdr restart
see
/u01/flxdr/vfabric-tc-server

Q: missing artifact com.emc.xcp:...
ex:
    Missing artifact com.emc.xcp:xcp-ivf-widgets:jar:2.2.0190.2448
    c:\xCPDesigner-2.2.19\maven\designer\com\emc\xcp\xcp-ivf-widgets\2.2.0190.2448\xcp-ivf-widgets-2.2.0190.2448.jar
    http\://localhost\:2910/maven/.lastUpdated=1488962382019

A:
    - Delete all error messages
    - delete gen/target/.index
    - delete all maven cache files: com/emc/xcp/**.lastUpdated
    - press refresh

Q:
  /u01/flxd/dba/log/flxdbase.log
  [DM_SESSION_I_RETRYING_DATABASE_CONNECTION]info:  "The following error was encountered trying to get a database connection:  ORA-12520: TNS:listener could not find available handler for requested type of server

A:
$ lsnrctl services
$ lsnrctl status
Listener Log File         /u01/app/oracle/diag/tnslsnr/flxd/listener/alert/log.xml

su - oracle
ORACLE_HOME=/u01/app/oracle/product/11.2.0/xe; export ORACLE_HOME
ORACLE_SID=XE; export ORACLE_SID
$ORACLE_HOME/bin/sqlplus -L / as sysdba


show parameter processes
show parameter sessions

# SESSIONS=(1.1 * PROCESSES) + 5

alter system set processes=500 scope=spfile;
alter system set sessions=600 scope=spfile;

Q: Deploy fails
A: 
    This is normal. Retry 2-3 times. Try rebooting. If still fails, see
    tail -F /u01/flxdr/xms/logs/xms-full.log
    tail -F /u01/flxdr/xDA/logs/xda-full.log


# Try cleaning xDA cache:
# login with flxdr
# kill xDA java process
pkill -fu "`cd /home && echo *xdr`" '^[^ ]*java.*xDA'

# then navigate to /u01/flxdr/xDA
# there you will have temp folder
rm -rf /u01/*/xDA/temp

# then restart the VM


Q: hard clean
A: 

gen\
target\
.generatedresources
.index
c:\Users\basin\AppData\Local\Eclipse


???
/u01/flxdr/tcserver/vfabric-tc-server-developer-2.9.5.SR1/xmsServer/temp


Q: Unable to create artifact project Concordant__Insurance  at location C:/xCPDesigner_2.1_P03_64bit/Applications/Concordant__Insurance
    Reason:
    Could not resolve archetype com.emc.xcp.rest:app-project-archetype:2.1.0030.4664 from any of the con
A:
    ~/.m2/settings.xml
    comment proxies


Q: find user by workflow
A:
  SELECT qi.name 
  FROM dmi_queue_item qi, dmi_workitem wi, dm_workflow wf 
  WHERE qi.r_object_id = wi.r_queue_item_id
  AND wi.r_workflow_id = wf.r_object_id
  AND wf.r_object_id = '4d01e24080001d04';

Q: Horizontal alignment Right not working
A: Change Column Box column orientation to Horizontal

Q: Action flow Next button condition expression
A: Make sure no variables used in the expression change on other steps

Q: find the "Next>" button inside an Action Flow:
A:
  var foundCmp = Ext.Component.fromElement(rawElem);
  var nextButton = foundCmp.findParentByType("xcp_wizard").nextButton;

Q: Run custom javascript / arbitrary javascript when page loaded
A:
  Value Display
  data type: html
  To prevent double initialization, do not set the widget value on the "General" tab
  Instead, use the "on page load" or "on fragment load" event
  set value:
    '
    <style onload=\'this.removeAttribute("onload"); console.log(this)\'></style>
    '

  "this" evaluates to the raw <style> element.
  "event" evaluates to the "load" event.
  "removeAttribute" must be called first to prevent "onload" fired twice in Firefox

  Use the following script to locate the enclosing container and its widgets:
    var rawElem = this;
    var foundCmp = Ext.Component.fromElement(rawElem);
    var foundFragm = foundCmp.findParentByType("xcp_fragment");
    var col_supp_name = foundFragm.query('[xcpId=' + 'col_supp_name' + ']')[0];


  Hide When: true

  !!! Executed twice. First from "finally", then from "contextready" handler !!!

    replaceChild : function(compConfig) {
        ...
        try {
            this.fireEvent('contextready');
            xcp.util.Utils.resizeBodyContainer();
        } finally {
            Ext.resumeLayouts(true);
        }

Q: "Hide When" on grid columns
A: Can be changed with grid menu

Q: server-side paging and sorting
A:
  Note that the clieant-side pagination is completely unsupported
  The server-side pagination is transparent for the Advanced Repository Query, but has to be handled explicitly for statless processes

  Add four input variables to the stateless process:
    sortcol - stateless process output parameter name
    sortord - "ASC" or "DESC"
    start   - zero-based starting row for paging
    limit   - page size
  
  Construct the DQL hint based on these parameters:
  enable (RETURN_range  <start+1> <limit> '<sortcol> <sortord>')
  !!! For DQL increment start by 1
  
  Optionally, assign default values in the Interactions
  When navigating or sorting, these values will be changed.
  
  ex: you click the header of the column associated with the output parameter "out_segment_title"
  variables implicitly assigned by xCP:
    start: 0
    sortord: ASC
    sortcol: out_segment_title
    limit: 25
  
  DQL: ... enable (RETURN_range  1 25 'out_segment_title  ASC')
