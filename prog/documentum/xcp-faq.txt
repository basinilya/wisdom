Q: mandatory does not work for edit inputs inside Results List with Allow inline editing
A:
  If mandatory is a constant (true) it will only be evaluated on fragment load,
  but the edit widgets are created when row editing is initiated for the first time.
  Use the widget's value in the expression to make it evaluate later.

Q: A blank mandatory edit input inside Results List with Allow inline editing is not marked with a red star
A: The red star is only shown when an input has a label. The Large error icon is never shown initially

Q: The label is too wide for edit inputs inside Results List with Allow inline editing
A: 
  labelWidth: 100 is the default width for Ext.form.Labelable
  Normally, a container creates configs having explicit labelWidth for its items,
  see the private method: Ext.container.Container.prototype.prepareItems
    item = this.applyDefaults(item);

  However, unlike ColumnVBox or columnhbox, Ext.grid.header.Container has no labelWidth of its own.
  Besides, the editor config is in subconfig "editor" of the column config. Merging
  deep defaults is unsupported, see: Ext.container.Container.prototype.applyDefaults
    config = me.self.getConfigurator().merge(me, Ext.Object.fork(defaults), config);

  The configs are converted to editor widgets inside
  Ext.grid.plugin.Editing.prototype.createColumnField
  which is usually called when the layout is flushed

  The workaround is to set editor.labelWidth for each item after it's created:

    Ext.ClassManager.get('xcp.widget.grid.ResultsList').override({
        onAdded: function(container, pos, instanced) {
            var res = this.callParent(arguments);
            var columns = this.grid && this.grid.columns;
            if (columns && columns.length !== 0) {
                var boxcolumn = this.findParentBy(function(c){return c.defaults && c.defaults.labelWidth !== undefined;});
                if (boxcolumn) {
                    var labelWidth = boxcolumn.defaults.labelWidth;
                    var i = 0;
                    for (;i < columns.length;i++) {
                        var column = columns[i];
                        if (column && column.editor && column.editor.labelWidth === undefined) {
                            column.editor.hideEmptyLabel = false; /* this if for mandatory marker in blank fields */
                            column.editor.labelWidth = labelWidth;
                            /* TODO: notify widget if it is already rendered */
                        }
                    }
                }
            }
            return res;
        }
    });


Q: A blank mandatory edit input inside Results List with Allow inline editing is not validated
  when selecting another row
A:
  xCP will call reset() on the the edit when selecting another row. This suppresses the change event.
  But it also clears the invalid state.
  When initiating editing, the change event doesn't fire, because the edit is already blank.
  As a workaround add more events to trigger validation: 
    selectionchange rowedited rowadded rowremoved rowmoved


Q: <input type="checkbox"> in cell of type HTML in editable grid not cleared
A: 
  '<input type="checkbox" disabled '
  + ifElseStr(
  asBool(getJavascriptPropertyValue(Outputs.values + '.value_b'))
  , 'checked /><span x-comment="Without this, Ext.dom.Fly.prototype.syncContent wont call dest.removeAttribute(checked)"></span>'
  , '/>')

Q: get page for type
A: xcp.defaultPages[<type>], see xcp.util.Utils.getDefaultPageFromContextMenu

Q: file selector: Information needed foo.dat. Complete the form.
A:
  Единственно правильный способ - не добавлять File Selector из палитры, а кликнуть правой кнопкой на Application UI,
  New Action Flow, Action: Custom Import
  
  При этом создастся Action Flow, у которого на вкладке Navigation/Interactions будет добавлен Custom Import Base Content
  а на Step 1 будет добавлен file selector, фрагмент и Card Container, и всё это будет связано друг с другом

  Наличие всех 4 компонентов обязательно. Удалять их нельзя. Можно только не выполнять Custom Import Base Content,
  а добавить ещё одно взаимодействие в Navigation.

  Card Container должен содержать хотя бы один виджет, иначе он не сможет нормально инициализироваться.
  Обычно этот виджет - фрагмент dm_document_imp.
  
  чтобы элемент в списке file selector был помечен как валидный,
  нужно, чтобы кто-то вызвал
  record.set('status', this.filestates.UPLOADED);
  
  Единственный, кто это делает, - это метод:
  xcp.widget.selector.FileSelector.prototype.onObjectOpReady
  обычно параметры
  name = "_topPageContainer.xcp.multiobject.object.op.ready", cardId = "files/f684acde-1967-494b-b448-4e1ecac61765"
  
  Единственный способ вызвать onObjectOpReady - это опубликовать событие xcp.event.multiobject.ObjectReadyOperation.NAME
  
  Только два компонента публикуют это событие в своем методе checkEnablement -
  xcp.action.form.ImportNewVersionTemplateAction.prototype.checkEnablement (Custom Import New Version)
  xcp.action.form.ImportTemplateAction.prototype.checkEnablement (Custom Import Base Content)
  
  оба расширяют класс xcp.action.form.MultiObjectDataAction
  
  Чтобы событие было опубликовано, нужно, чтобы все инпуты Custom Import были заполнены валидными данными, включая модель.
  См. xcp.action.form.ImportTemplateAction.prototype.isInvalid
    folder id должен быть не пуст и не равен '0000000000000000'
    Остальные должны быть не пусты
  Тогда objectValid будет true
  Входы:
    Folder ID: actionflow.Inputs.folder_id
    Content ID: actionflow.steps.custom_add_files_st.widgets.fileselector.selectedFileId
    Content Type: 'dm_document'
    Model: actionflow.steps.custom_add_files_st.widgets.fragment.Outputs.model


  Чтобы модель была заполнена, нужно добавить на страницу стандартный фрагмент dm_document_imp и использовать его вывод с типом "модель".
  Также можно использовать Set Fragment Id: getFragment(<namespace> + '_document', '_imp')
  Входы фрагмента:
    content_type: 'dm_document'
    content_format: widgets.fileselector.selectedFileExtension
    folder_path:
    object_name: widgets.fileselector.selectedFileName
  
  Чтобы событие было опубликовано, у инстанса xcp.action.form.MultiObjectDataAction должен быть заранее вызван
  this.objectStore.add, у которого objectValid по дефолту false
  
  
  для этого нужно, чтобы при добавлении файла кто-то вызвал xcp.action.form.MultiObjectDataAction.prototype.onViewLoad(name, newObjectId)
  обычно параметры
  name = "_topPageContainer.application.cardLoadEvent", newObjectId = "files/f684acde-1967-494b-b448-4e1ecac61765"
  
  Единственный способ вызвать onViewLoad - это опубликовать событие xcp.event.CardLoadEvent.NAME
  
  Единственный, кто публикует это событие, - это
  xcp.widget.CardContainer (Card Container)
  
  Чтобы это работало, у Card Container в дизайнере должны быть заполнены поля:
  Remove Child: widgets.fileselector.removedFileId
  Select Child: widgets.fileselector.selectedFileId
  
  В палитре этого виджета нет. Скопировать его тоже нельзя. Можно только скопировать кусок XML.



Q: java service guide
A:
  If have more than one parameter, use a java bean, not multiple method parameters, because argument names not preserved
  
  Java Beans have limited support
  
  java inputs:
  do not use generics, the process variable mapper is broken.
  for multivalue use arrays: String[], etc.
  
  java outputs:
  generics work, use List<Date/Integer/Double/String>
  Do not return lists of beans: nulls will be compacted. Return beans of lists.
  
  Inherited bean members not supported, add common beans as members, not parent classes 
  
  method can throw any java.lang.Exception

Q: get component by unique xcpId
A: btn_maximize = Ext.ComponentQuery.query("[xcpId=" + "btn_maximize" + "]")[0]

Q: custom Java function
A:
  Java class file that defines the custom function. After you compile the file
  as a Java archive (JAR) library and add it, the function appears when you
  build an expression.

  See FunctionClass in h11306-extension-points-xcp-wp.pdf
  
  FunctionClass.class is in expressions.jar in xCPDesigner16.4P6\plugins\com.emc.ide.artifact.process.ui_1.0.0.201810161037.jar
  Add expressions.jar to build path
  A custom class must implement FunctionClass
  methods must be public static and annotated with @XcpFunction

  import com.emc.xcp.expressions.FunctionClass;
  import com.emc.xcp.expressions.XcpFunction;
  public class CustomFunctions implements FunctionClass {  
      @XcpFunction(category = "Custom", description = "some1")
      public static String aaaFoo(final String param) {
          return param;
      }
      @XcpFunction(category = "Conditional", description = "some2")
      public static String aaaBar(final String param) {
          return param;
      }
      @XcpFunction(description = "some3")
      public static String aaaBaz(final String param) {
          return param;
      }
  }
  
  Create a Java Module in xCP and set its primary class to "CustomFunctions"
  
  Now the functions should be available in expressions builder

Q: stale browser cache after release
A: 
  increment the project version in pom.xml before packaging the app, possibly use the build number from CI
  also, if target/${PROJECT}_${NAMESPACE}_${VERSION}_config.xml is generated, name it properly.
  This will affect the paths of JS and CSS resources

Q: ClassNotFoundException: org.apache.commons.logging.LogFactory
  when trying to update an object having business events using idql
A: 
  ${DM_HOME:?}/bin/java.ini
  -java_classpath = /path/to/product/7.3/dctm-server.jar:/path/to/share/dctm.jar:/path/to/share/config:/path/to/share/java64/JAVA_LINK/jre/lib
  +java_classpath = /path/to/product/7.3/dctm-server.jar:/path/to/share/dctm.jar:/path/to/share/config:/path/to/share/java64/JAVA_LINK/jre/lib:/path/to/dba/java_methods/commons-logging-1.1.3.jar

Q: Internal error occurred on xCP Deployment Agent.
A: see xda.log

Q: in xda.log:
  ERROR [main][org.springframework.boot.SpringApplication] - Application startup failed
  Caused by: com.xhive.error.XhiveException: FEDERATION_ALREADY_OPEN: Federation /u01/efxar/XDA_DATA/catalog/xDB/XhiveDatabase.bootstrap is already opened
  ...
  Resolving exception from handler [null]: org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is org.apache.commons.fileupload.FileUploadBase$IOFileUploadException: Processing of multipart/form-data request failed. /u01/efxar/xDA/temp/tomcat.8381911546944964385.7000/work/Tomcat/localhost/xda/upload_85062e28_c431_4911_9345_53a0311a3291_00000009.tmp (No such file or directory)
A:
  restart xDA

Q: assign historic date widget utc
A: splitString(dateToString(d, 'C'),'T')[0]+'T00:00Z

Q: "Not all contextNodes available for evaluation"
A:

Q: "Could not find the generated expression function"
A:  refresh page with cache disabled

Q: Application UI editor misbehaves:
  Layout tab is blank
  Editor tab has no title
A:
  Install Microsoft Visual C++ 2010 Redistributable Package (x64)
  http://www.microsoft.com/en-in/download/confirmation.aspx?id=14632


Q:
   11:50:54.056 ERROR [CodegenUtils:167] Error Generating artifacts: null
   java.lang.NullPointerException
   	at com.emc.xcp.uitemplate.json.generator.UITemplateLocalizationGenerator.printProperties(UITemplateLocalizationGenerator.java:91)
   	at com.emc.xcp.uitemplate.packaging.WarGenerator.contributeLocalizationConfig(WarGenerator.java:423)
   	at com.emc.xcp.uitemplate.packaging.WarGenerator.contribute(WarGenerator.java:323)
   	at com.emc.xcp.uitemplate.packaging.WarGeneratorContributor.generate(WarGeneratorContributor.java:35)
   	at com.emc.xcp.builder.codegen.CodegenUtils.generateCodes(CodegenUtils.java:149)
   	at com.emc.xcp.builder.codegen.CodegenUtils.executeArtifactGenerators(CodegenUtils.java:104)
   	at com.emc.xcp.builder.codegen.internal.CodeGeneratorService.generateCode(CodeGeneratorService.java:41)

A:

Q:
  Some required dependencies are missing from the selection.
    Project efx:EducationApplication has an invalid POM file
      Archetype not found: com.emc.xcp.rest:app-project-archetype:16.4.0060.0228
A:


Q: Caused by: org.apache.maven.plugin.MojoExecutionException: java.lang.IllegalArgumentException: project 'TestApp' is not an IXCPProject
        at com.emc.xcp.builder.codegen.CodegenUtils.executeArtifactGenerators(CodegenUtils.java:63)
A:

Q: mvn package from command line fails Windows with:
  [INFO]   Error importing project TestApp at location c:\testapp\TestApp  
  [INFO]     Invalid project description.
A: 
  The real cause is not printed. Most probably it's "overlaps the location of another project".
  This happens when -importLocation pased to com.emc.xcp.builder.cli.CLIApplication starts with
  a lower-case drive letter. Eclipse internally calls
  "c:\testapp\TestApp".equals("C:\testapp\TestApp") and fails validation.
  importLocation is projectPath and <projectPath default-value="${basedir}"/>
  Maven inherits the current working directory from its calling process, usually cmd.
  If cmd's current working directory has a lowercase drive letter, same goes for ${basedir}.
  So to make ${basedir} start with a capital drive letter, either change fix the current working
  directory or pass the absolute path to pom.xml in maven command line:
  mvn -f "C:\testapp\TestApp\pom.xml" ...

Q: 
    PDF preview fails with:
    http://127.0.0.1:8888/TestApp/undefined 404 (Not Found)
A:
    Go to Application / Settings / Viewers and Formats and select all available formats for xCP Advanced Viewer.

Q: 
    PDF preview fails with:
    Access to XMLHttpRequest at 'http://host:9080/ACS/servlet/ACS?command=read&...'
    from origin 'http://host:8000' has been blocked by CORS policy:
    No 'Access-Control-Allow-Origin' header is present on the requested resource.
A:
  Edit ${JBOSS_HOME:?}/server/DctmServer_MethodServer/deployments/acs.ear/bocs.war/WEB-INF/web.xml
  and set CORSAllowed to true (see xCP Deployment Guide)

Q: Stateless Process errors not displayed when using grid sort/navigate
A: 
    operation.feedbackContainer is not set
    
    To obtain feedbackContainer call getEffectiveFeedbackContainer() of xcp.action.form.DataSourceAction
    To obtain current DataSourceAction for a Store override constructor() of xcp.action.form.DataSourceAction
    and add another handler:
    
    Ext.ClassManager.get('xcp.action.form.DataSourceAction').override({
        constructor: function() {
            var res = this.callParent(arguments);
            var me = this;
            me.store.on("beforeload", function (store, operation) {
                if (!operation.feedbackContainer) operation.feedbackContainer = me.getEffectiveFeedbackContainer();
            }, me);
            return res;
        }
    });

Q: Application Parameters
A:  
  http://192.168.56.150:8000/AppName/#application/<namespace>_application_parameter
  
  select config_name,  property_value, i_position from dmc_xcp_app_config
  order by config_name, i_position DESC
Q: null array
A: matchString('','x')

Q: AppDeployException Fetch of object with handle 12xxxxxxxxxxxxxx and type NULL failed.
A:
  TL;DR: remove temporarily the artifact (if you know it) which had this id from
  your project, then deploy and then restore the deleted artifact from VCS or
  Recycle Bin.
  
  Deployer is trying to perform some operation with the object which it believes
  was installed into docbase earlier and which is seemingly already deleted by
  you from there.
  
  Deployer finds the previous artifacts through the attributes of
  xcp_artifact_bundle, in particular, its latest version with
  bundleinstallstatus = 1.
  
  You can obtain the object's versions with this DQL query:
  
    select  r_object_id, r_version_label, namespace, r_modify_date, bundleinstallstatus
    from  xcp_artifact_bundle (all)
    where object_name = 'MyApplication'
    order by r_modify_date desc;
  
  Then you dump the latest installed version and in the dump you can find the
  artifact's ID in the attribute installedobjectid and then knowing its index
  find its urn in the attribute artifacturn. For instance, I have this artifact
  on my host:
  
    artifacturn: [9]: urn:spr:com.emc.xcp.artifact.approle:Artifacts/Roles/licensing.role
    installedobjectid: [9]: 1201e24080000d00

Q: automatic hyperlinks in first column
A:
  <a href="javascript:void(0)" onclick="xcp.util.Utils.navigateOnCellClick('contents/ns_contract/0901e2408007ecae', 'ns_contract', '1585764118000', 'results_list1', this)">test.pdf</a>

    Гиперссылки в первой колонке не поддерживаются для Stateless Process,
    однако если вызвать контекстное меню для строки грида, и если источник
    данных содержит верно заполненные "id" и "r_object_type", то гиперссылка
    появится в этой строке. При вызове контекстного меню осуществляется новый запрос,
    и в текущий объект record добавляется атрибут "links", полученный с сервера.
    
    Первая колонка любого грида является экземпляром ResultsListPageLinkColumn.
    Чтобы ячейка отрисовывалась как гиперссылка, надо, чтобы в метод
    xcp.widget.grid.ResultsListPageLinkColumn.prototype.renderer
    передавалась переменная record с заполненными:
    
    record.data["links"]["self"] === "***/<type>/<oid>"
    record.data["id"] === "***/<type>/<oid>"
    
    Изначально свойство "links" отсутствует, сравни
    xcp.data.reader.StatelessProcessOutputCollectionReader.prototype.readRecords
    и
    xcp.data.reader.CollectionResJson.prototype.readRecords
    
    во втором случае заполняется:
    item[xcp.data.Model.LINKS_ATTR_NAME] = val[xcp.RestConstant.CONTENT] && val[xcp.RestConstant.CONTENT][xcp.RestConstant.LINKS];
    
    Ajax ответ от Stateless Process в отличие от ARQ не содержит "links" для отдельных записей.

Q: dataservices.<ARQ_name>.outputs.id resolves to 'dql-queries/<ARQ_name>/<r_object_id>' instead of just '<r_object_id>'
A: Use a column alias, e.g.: select r_object_id as oid, ...

  Note: In xCP 2.0, you can get context menu for stateless process in a results list, if the process has
  output variable named "id" which contains Object ID and "r_object_type" which contains Object Type.
  This stopped working in 2.1. To make it work ensure now that "id" output variable returns the Object
  URI of the form "business-objects/[r_object_type]/[r_object_id]" instead of just object ID. (Change
  "business-objects" to "contents" or "folders" as required).


Q: the expression used in transition / no functions in stateless process
A: some java code not up to date. Update all jars under content/

Q: over-write insert before insert after
A: to prepend one row, create two "set process data"
  in the first "set process data" copy all affected multivalue variables into temporary variables
  in the second "set process data" copy the new first row to variable[0] and copy the temporary variable to variable[1]

Q: NoClassDefFoundError: Could not initialize class com.emc.xcp.model.processmodel.process.ProcessPackage
A: Compare the contents of ServerApps.ear/lib/ and bpm.ear/lib/ . Some xcp jars might be missing

Q: preview mode privileged client
  is not authorized to use role 'dm_superusers_dynamic'
A:
  - in design-time environment fill the global registry tab
    see com.emc.xcp.builder.ui*.jar/internal.com.emc.xcp.builder.ui.preview.RepositoryEndpointPreviewContributor
    The temporary dfc.properties and dfc.keystore are in %TEMP%
  - launch preview mode
  - DA/Client Rights Management/Privileged clients/Manage Clients
  - add and approve
  - update dm_client_rights objects set allow_all_roles = true where client_id = '...';
      or
      update dm_client_rights objects set allow_all_roles = true where allow_all_roles is nullint;

Q: "On Fragment Load" conditional trigger doesn't work with fragment inputs 
A: The event fires before the inputs are ready. Use an intermediate widget's "change" event. The "setValue()" call is deferred so all the inputs will be ready when "change" fires. 

Q: check string is valid number
A: isNumber(getJavascriptPropertyValue('parseFloat('+<quotedString>+')'))
  (don't use xCP isNumber() or isNaN() directly: they don't do what you think they do)

Q: clear Number Input
A: set value: { 0 }[1]

Q: clear Date Input
A:
  An expression returning null or undefined will be ignored, see
  xcp.core.expr.ExpressionPropertiesPlugin.prototype.createEventHandler
  We need an expression returning an empty string and then cast it to date.
  set-value will accept expressions of type ANY so we can use:
  ifThenElse(true,'','')

Q: file selector
A:
Set List of File IDs
  setFileIDs: function(fileIDs)
  // accepts array to merge with existing entries
  // cannot be used to remove entrie

fileselector.removeBtn

Q: expression breakpoint
A: getJavascriptPropertyValue('(()=>{debugger;})()')

Q: get array element at variable
A: No such function

Q: eval
A: getJavascriptPropertyValue(s)

Q: field's isValid
A: = (value != '' OR NOT mandatory) AND (value == '' OR NOT (<Validation-Expression>))
  * see the dropdown list specifics

Q: mandatory
A: only affects blank fields. Red mark near the label. Can be cleared dynamically to remove the red mark.
  * see the dropdown list specifics

Q: validation 
A: only affects non-blank fields
  * see the dropdown list specifics

Q: dropdown set value before datasource load
A:
  setValue() will search for matching value in the dropdown's data store and if not found, clear the value.
  However, if called before the data store is loaded for the first time, the value is saved in a custom field
  and used later when load completes. After it's loaded, you can't set an invalid value even if after
  re-loading the data store will contain the invalid value.

Q: dropdown list validation
A:
    Using properties of a dropdown in validation expression may give weird results.
    It is recommended to create intermediate hidden value displays for
    "value" and "selectedValue" and use them in the validation. The event triggering
    the validation should be changed from dropdown.change to the intermediate widgets
    change.

Q: dropdown list disallow arbitrary value
A: value: widgets.<widget-name>.selectedValue

Q: inputPropertyChange
A: fired by this.fireEvent("inputPropertyChange") from datasource setInputProperty() even when the value not really changed

Q: automatically disable button during stateless process
A: The process must not have triggers on the "Behavior" tab and
   the buttons must have "Invoke:" "Data service instance" and
   "Data service instance: " name of the process.

Q: xCP functions that run in browser context
A: xcp-functions-16.4.0060.0070.jar\xcp-core-functions\content\xcp\core\**\*.js

Q: Result List from stateless process row number
A: max of all multivalue properties

Q: Cache-Control: max-age=31100000
A:
  TestApplication-1.0.0\WEB-INF\lib\Services-16.4.0060.0070.jar\com\emc\xcp\config\web\deployment-ui.properties

    StaticApplicationResourceCacheSeconds=31100000
    ComponentResourceCacheSeconds=31100000

Q:  "can be used to sort" is greyed out in a Result List column properties
A:  You have an Advanced Repository Query attached to the Result List and its <output>s aren't sortable.
    Open the query, go to the "Dataset" tab and click any column in the "Output Columns" section
    There's the checkbox "Enable Sorting" in the Properties view, "General" tab
    If there's no such checkbox, make sure that the query string ends with "order by ?".

Q: "cannot load artifact" error
A:
- The artifact was opened for editing when XCP was closed
- The artifact file was deleted in the source repository
Solution: delete the .index file

Q: "Refresh" group box missing in on the "General" tab of an Iteraction
A: The stateless process has no output variables. Fix the process and re-add the interaction

Q: group/process/type already exists in the repository
A: Caused by incomplete deploy. Restore last good snapshot and try again

Q: No business events tab in a custom relation type
A: see the business events tab in the "Source Model" (parent) type

Q: Business events triggered
A: XcpTransactionListener.onPreCommit

Q: inherit context menu of parent type
A: unsupported

Q: result list "disable default navigation"
A: Select to override the default behavior of the first column of the results list widget that is represented as a link

Q: result list disable auto resize
A: Style/Height/ "px"

Q:
  java.io.FileNotFoundException: Specified source file does not exists: D:\TestApp\configuration\asdasdasd_config.xml
A:
  Do not ever delete the folder "configuration". If you did,
  delete and re-create the run configuration

Q: 
  Unsupported function name length
  No server-side functions loaded
A:
  Some java module has missing jar

Q: UI expressions: multival[0] when empty
A:

Q: not lose mappings switch single <-> multi
A:

            <From>
                <Value>/Collection/Object[0]/finishing_packaging_instruc</Value>
            <From>
                <Value>/Collection/Object[ALL]/finishing_packaging_instruc</Value>


  To>/Process Data/Variables/out_instructions&lt;/To>
  To>/Process Data/Variables/out_instructions[0]&lt;/To>


  - Change variable types, do not open mapping. Save.
  - 
  sed -b -i 's,\(To>/Process Data/Variables/[^&]*\)&,\1[0]\&,g' EducationApplication/Artifacts/Processes/get_print_productio.process
  sed -b -i 's,\(&lt;From>[^>]*&lt;Value>/Collection/Object\)\[0\],\1[ALL],g' EducationApplication/Artifacts/Processes/get_print_productio.process

  - refresh

Q: Process Variables
A: Process Properties/Data


Q: drop attribute
A: 
  - before deleting: click attribute and see where used
  - delete attribute, save
  - re-open all artifacts where was used and save

Q: relationship "Source Model", "Target Model"?
A: "Source Model" = parent, "Target Model" = child

Q: find usages
A: The "Where used" view in the bottom-left corner

Q: Unable to deploy application
A:
find /u01 -type f -name "*.log" -mtime -1 | xargs ls -lt

-rw-r--r--. 1 efxdm efxdm  138517 Nov  5 12:28 /u01/efxd/share/wildfly9.0.1/server/DctmServer_MethodServer/logs/bpm-runtime.log
-rw-rw-rw-. 1 efxdm efxdm   11371 Nov  5 12:28 /u01/efxd/dba/log/0001e240/agentexec/agentexec.log
-rw-rw-r--. 1 efxdm efxdm  900785 Nov  5 12:27 /u01/efxd/xPlore/jboss7.1.1/server/DctmServer_PrimaryDsearch/logs/xdb.log
-rw-r--r--. 1 efxdr efxdr      24 Nov  5 12:24 /u01/efxdr/XDA_DATA/catalog/xDB/log/xhive_checkpoint.log
-rw-rw-r--. 1 efxdr efxdr 1105920 Nov  5 12:24 /u01/efxdr/XDA_DATA/catalog/xDB/log/xhive_0000000002.log
-rw-rw-r--. 1 efxdr efxdr  151432 Nov  5 12:24 /u01/efxdr/xDA/bin/log4j.log


Q: xcp version
A: 
    Help > About > Build;
    or
    plugins/com.emc.xcp.builder.workspace_*.jar
      /internal/com/emc/xcp/builder/workspace/project/util/ArchetypeVersions.properties
    or
    plugins/com.emc.xcp.designer.executionenvironments_*.jar
      /plugin.xml
        top level <environment ...>
    
    
    16.4.0030.0148
    Ma
       Mi
         PPPP
    
    16.4 Patch 3

Q: Invalid combination of DataPolicy MINIMAL and deploying to a PRODUCTION environment, only MAINTAIN is supported
A: Edit run configuration

Q: xCP project moved
A: 

Open:
Applications\.wsdata\ws_data.xwd
Change the path:
MRU_WORKSPACE_LOCATION=path\to\projectAsDAsdasdASD

Open:
Applications\workspaces.xml

Remove the workspace

Delete the folder in Applications\

See also
Applications\ajwf\.metadata\.plugins\org.eclipse.debug.core\.launches\Standard XCPApplicationProject Build.launch
d:\ACDC-Code\acdc\acdc\ajwf\configuration\run_config.xml

Q: debug javascript
A: ?nominify
(remove ?reload to make breakpoints persistent)

Q: debug css
A: ?nominify

Q: custom theme */src/main/webapp/js/resources/css/xcp-custom-theme-*.css
A: 
    git clone <theme-project>
    cd <theme-project>/MaterialTheme
    ant

    put to xcp project,

    http://cdn.sencha.com/cmd/6.1.3.42/jre/SenchaCmd-6.1.3.42-windows-64bit.zip
    xcpdesigner.ini
    -Dxcp.theme.compiler.location=C:/Sencha/Cmd/6.1.3.42
    Master page -> Basics tab -> Application theme dropdown -> Apply button


Q: environment settings (xms)
A:  xCPDesigner_2.3P03\Applications\

Q: missing artifact com.emc.xcp:...
ex:
    Missing artifact com.emc.xcp:xcp-ivf-widgets:jar:2.2.0190.2448
    c:\xCPDesigner-2.2.19\maven\designer\com\emc\xcp\xcp-ivf-widgets\2.2.0190.2448\xcp-ivf-widgets-2.2.0190.2448.jar
    http\://localhost\:2910/maven/.lastUpdated=1488962382019

A:
    - Delete all error messages
    - delete gen/target/.index
    - delete all maven cache files: com/emc/xcp/**.lastUpdated
    - press refresh

Q:
  $DOCUMENTUM/dba/log/*base.log
  [DM_SESSION_I_RETRYING_DATABASE_CONNECTION]info:  "The following error was encountered trying to get a database connection:  ORA-12520: TNS:listener could not find available handler for requested type of server

A:
$ lsnrctl services
$ lsnrctl status
Listener Log File         /u01/app/oracle/diag/tnslsnr/*/listener/alert/log.xml

su - oracle
ORACLE_HOME=/u01/app/oracle/product/11.2.0/xe; export ORACLE_HOME
ORACLE_SID=XE; export ORACLE_SID
$ORACLE_HOME/bin/sqlplus -L / as sysdba


show parameter processes
show parameter sessions

# SESSIONS=(1.1 * PROCESSES) + 5

alter system set processes=500 scope=spfile;
alter system set sessions=600 scope=spfile;

Q: Deploy fails
A: 
    This is normal. Retry 2-3 times. Try rebooting. If still fails, see
    tail -F /u01/*/xms/logs/xms-full.log
    tail -F /u01/*/xDA/logs/xda-full.log


# Try cleaning xDA cache:
# login as Tomcat unix user
# kill xDA java process
pkill -fu "`cd /home && echo *xdr`" '^[^ ]*java.*xDA'

# then navigate to /u01/*/xDA
# there you will have temp folder
rm -rf /u01/*/xDA/temp

# then restart the VM


Q: The container 'Maven Dependencies' references non existing library
A: click the refresh project button, then open pom.xml for editing in XCP and manually delete the bad dependencies

Q: hard clean
A: 

del /s /q gen\ & del /s /q target\ & del /s /q .generatedresources & del /s /q .index & del /s /q %USERPROFILE%\AppData\Local\Eclipse & git checkout gen


???
/u01/*/tcserver/vfabric-tc-server-developer-2.9.5.SR1/xmsServer/temp


Q: Unable to create artifact project Concordant__Insurance  at location C:/xCPDesigner_2.1_P03_64bit/Applications/Concordant__Insurance
    Reason:
    Could not resolve archetype com.emc.xcp.rest:app-project-archetype:2.1.0030.4664 from any of the con
A:
    ~/.m2/settings.xml
    comment proxies


Q: find user by workflow
A:
  SELECT qi.name 
  FROM dmi_queue_item qi, dmi_workitem wi, dm_workflow wf 
  WHERE qi.r_object_id = wi.r_queue_item_id
  AND wi.r_workflow_id = wf.r_object_id
  AND wf.r_object_id = '4d01e24080001d04';

Q: Horizontal alignment Right not working
A: Change Column Box column orientation to Horizontal

Q: Change Column Box column orientation in runtime
A: 
    /* initial Orientation MUST be "Horizontal" */
    var columnvbox = firstChld.ownerCt;
    cb_vertical.addListener("change", function(){
        var checked = !!cb_vertical.getValue();
        columnvbox.layout.setVertical(checked);
        columnvbox.updateLayout();
    });
    
  See change-orientation.gif

Q: Action flow Next button condition expression
A: Make sure no variables used in the expression change on other steps

Q: find the "Next>" button inside an Action Flow:
A:
  var foundCmp = Ext.Component.fromElement(rawElem);
  var nextButton = foundCmp.findParentByType("xcp_wizard").nextButton;

Q: Run custom javascript / arbitrary javascript when page loaded
A:
  Value Display
  data type: html
  To prevent double initialization, do not set the widget value on the "General" tab
  Instead, use the "on page load" or "on fragment load" event
  set value:
    '
    <style onload=\'this.removeAttribute("onload"); console.log(this)\'></style>
    '

  "this" evaluates to the raw <style> element.
  "event" evaluates to the "load" event.
  "removeAttribute" must be called first to prevent "onload" fired twice in Firefox

  Use the following script to locate the enclosing container and its widgets:
    var rawElem = this;
    var foundCmp = Ext.Component.fromElement(rawElem);
    var foundFragm = foundCmp.findParentByType("xcp_fragment");
    var col_supp_name = foundFragm.query("[xcpId=" + "col_supp_name" + "]")[0];


  Hide When: true

  !!! Executed twice. First from "finally", then from "contextready" handler !!!

    replaceChild : function(compConfig) {
        ...
        try {
            this.fireEvent('contextready');
            xcp.util.Utils.resizeBodyContainer();
        } finally {
            Ext.resumeLayouts(true);
        }

Q: "Hide When" on grid columns
A: Can be changed with grid menu

Q: server-side paging and sorting
A:
  Note that the clieant-side pagination is completely unsupported
  The server-side pagination is transparent for the Advanced Repository Query, but has to be handled explicitly for statless processes

  Add four input variables to the stateless process:
    sortcol - stateless process output parameter name
    sortord - "ASC" or "DESC"
    start   - zero-based starting row for paging
    limit   - page size
  
  Construct the DQL hint based on these parameters:
  enable (RETURN_range  <start+1> <limit> '<sortcol> <sortord>')
  !!! For DQL increment start by 1
  
  Optionally, assign default values in the Interactions
  When navigating or sorting, these values will be changed.
  
  ex: you click the header of the column associated with the output parameter "out_segment_title"
  variables implicitly assigned by xCP:
    start: 0
    sortord: ASC
    sortcol: out_segment_title
    limit: 25
  
  DQL: ... enable (RETURN_range  1 25 'out_segment_title  ASC')
